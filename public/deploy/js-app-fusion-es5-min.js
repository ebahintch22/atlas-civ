function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function detect_client(){var e=!!window.opr&&!!opr.addons||!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,t="undefined"!=typeof InstallTrigger,a=/constructor/i.test(window.HTMLElement)||"[object SafariRemoteNotification]"===(!window.safari||"undefined"!=typeof safari&&safari.pushNotification).toString(),n=!!document.documentMode,i=!n&&!!window.StyleMedia,l=!(!window.chrome||!window.chrome.webstore&&!window.chrome.runtime),r=l&&-1!=navigator.userAgent.indexOf("Edg"),o=((l||e)&&window.CSS,_typeof("undefined"!==window.orientation)||-1!==navigator.userAgent.indexOf("IEMobile")),d={};return d.browser={isFirefox:t,isChrome:l,isSafari:a,isOpera:e,isIE:n,isEdge:i,isEdgeChromium:r},d.isMobile=o,d}Ajaxian=new function(){return{read:function(e,t,a){$.ajax({url:e,type:"get",success:function(e){t(e)},error:function(e,t,n){a(e,t,n)}})},post:function(e,t,a,n){$.ajax({url:e,type:"post",dataType:"json",contentType:"application/json",data:JSON.stringify(t),success:function(e,t,n){a(e)},error:function(e,t,a){n(e,t,a)}})}}};var parseTime,timeParse,opera_console=opera_console||function(){new Intl.NumberFormat;return{_log:function(e){},addLog:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]},updateStats:function(){},clearlog:function(){},explain:function(){},date_format:new function(){var e={weekday:"short",year:"2-digit",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"};if(window.Intl){var t=new window.Intl.DateTimeFormat("fr-FR",e);return{date:function(e){return t.format(e)},date_str:function(e){return t.format(new Date(e))}}}return function(e){return e}}}}(),UTIL=function(){var e=new Intl.NumberFormat;return{format_number:function(t){return e.format(t)},format_number_in_object:function(t){var a={};for(var n in t)t.hasOwnProperty(n)&&(0==n.indexOf("FLD",0)?a[n]=e.format(t[n]):a[n]=t[n]);return a}}}();function toJSON(e){return JSON.stringify(e)}function fileLoad_JSON(e,t,a){d3.json(t,function(e,t){return t.sort(function(e,t){return parseTime(e.date)-parseTime(t.date)}),t.forEach(function(e){e.date_raw=e.date,e.date=parseTime(e.date),e.new_case=+e.new_case,e.new_healed=+e.new_healed,e.new_deceased=+e.new_deceased,e.sum_case=+e.sum_case,e.sum_healed=+e.sum_healed,e.sum_deceased=+e.sum_deceased,e.active_case=+e.sum_case-e.sum_healed-e.sum_deceased,e.nb_sample=+e.nb_sample,e.sum_sample=+e.sum_sample,e.incidence=100*+e.incidence}),a(t),t})}function fileLoad_CSV(e,t,a,n){d3.csv(t,function(e){return{CODE:e.CODE,ADM_NAME:e.ADM_NAME,GEOLOC:e.GEOLOC,LEVEL:e.LEVEL,FLD1:+e.FLD1,FLD2:+e.FLD2,FLD3:+e.FLD3,FLD4:+e.FLD4,FLD5:+e.FLD5,FLD6:+e.FLD6,FLD7:+e.FLD7,FLD8:+e.FLD8,FLD9:+e.FLD9,FLD10:+e.FLD10,FLD11:+e.FLD11,FLD12:+e.FLD12}},function(e,t){e?(console.log("erreur rencontrées"),n(e)):(console.log("chargement réussie"),a(t))})}function format_statistic_tables(e){var t=d3.nest().key(function(e){return e.LEVEL}).rollup(function(e){return e}).map(e);t.REGION,t.DISTRICT;return table_region=d3.nest().key(function(e){return e.CODE}).rollup(function(e){return e[0]}).map(t.REGION),table_district=d3.nest().key(function(e){return e.CODE}).rollup(function(e){return e[0]}).map(t.DISTRICT),{district:table_district,region:table_region,region_raw:t.REGION,district_raw:t.DISTRICT}}function set_time_config(){dateFormat=d3.time.format("%d/%m/%Y"),parseTime=dateFormat.parse}function _StorageManager(){var e=null;return{existItem:function(t){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1])return!0;var a=localStorage.getItem(t);return e=a,!!a},getItem:function(){return JSON.parse(e)},setItem:function(e,t){var a=JSON.stringify(t);localStorage.setItem(e,a)},removeItem:function(e){localStorage.removeItem(e)}}}function set_datatable(e,t,a){return $(e).DataTable({data:[],select:!0,deferRender:!0,scrollY:a||490,scrollX:!0,scrollCollapse:!0,scroller:!1,searching:!0,paging:!0,pageLength:100,language:{decimal:",",emptyTable:"Pas de données disponible dans le tableau",info:"Page _START_ à _END_ sur _TOTAL_ ligne(s)",infoEmpty:"Aucune ligne à afficher",infoFiltered:"(filtrage actif: _TOTAL_ ligne(s) trouvée(s) sur _MAX_ )",infoPostFix:"",thousands:" ",lengthMenu:"Afficher _MENU_ lignes",loadingRecords:"Chargement des données en cours...",processing:"Traitement en cours...",search:"Rechercher :",zeroRecords:"Aucune ligne trouvée",paginate:{first:"Début",last:"Fin",next:"Suivant",previous:"Précédent"},aria:{sortAscending:": activer le tri ascendant",sortDescending:": activer le tri descendant"}},columns:t,fixedHeader:{header:!0,footer:!0}})}set_time_config();var default_table_selection=function(){return"demographic"===this.name?'selected = "selected"':""},default_field_selection=function(){return"FLD1"===this.fld_name?'selected = "selected"':""};function get_renderer(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=t;return{count:e,threshold:0==i.length?i:function(e,t,a){var n=(a-t)/(0==e?10:e);return d3.range(t,a,n).map(function(e){return Math.round(e)})}(e,t[0],t[1]),colormap:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#ffffff",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#000000",n=d3.scale.linear().domain([0,e]).interpolate(d3.interpolateRgb).range([d3.rgb(t),d3.rgb(a)]);return new Array(e+1).fill("0").map(function(e,t){return n(t)})}(e,a[0],a[1]),value_range:l(t),color_range:l(a),labelmap:l(n),source:"auto"};function l(e){return e.map(function(e){return e})}}function generate_colArray(e){var t=[{data:"CODE",title:"Code"},{data:"ADM_NAME",title:"Circonscription"}];return t=e.data_fields.reduce(function(e,t){return e.push({data:t.fld_name,title:t.short_name}),e},t)}function build_colormap(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#ffffff",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#000000",n=d3.scale.linear().domain([0,e-1]).interpolate(d3.interpolateRgb).range([d3.rgb(t),d3.rgb(a)]);return new Array(e).fill("0").map(function(e,t){return n(t)})}var DEFAULT_PARSER={id_field:"CODE",name_field:"ADM_NAME",class_field:"LEVEL",classes:[{ord:1,value:"REGION",layer:"region_sante"},{ord:2,value:"DISTRICT",layer:"district_sante"}]},COVID_PARSER={id_field:"CODE",name_field:"ADM_NAME",class_field:"LEVEL",classes:[{ord:1,value:"DISTRICT",layer:"district_admin"},{ord:2,value:"REGION",layer:"region_admin"}]},metaDataBase={data_base_name:"Atlas Sanitaire - Côte d'Ivoire  - RASS 2017 version 1.0.5",version:"2.0",date:"21/05/2020",geo_dataset:{name:"district_sante",class:"Districts sanitaire",label:"Découpage en <b> districts sanitaires (83)</b>",path:"./data/geojson/health/civ-district-sante.geojson"},geo_datasets:[{id:"layer-1",name:"region_sante",names:{value:"Région sanitaire",many:"Régions sanitaires",abbr:"RS."},label:"Découpage en régions sanitaires (20)",path:"./data/geojson/health/civ-region-sante.geojson",idfield:"code_R",labelField:"Region_S"},{id:"layer-2",name:"district_sante",names:{value:"District sanitaire",many:"Districts sanitaires",abbr:"DS."},label:"Découpage en districts sanitaires (83)",path:"./data/geojson/health/civ-district-sante.geojson",idfield:"code",labelField:"District_S"},{id:"layer-3",name:"district_admin",names:{value:"District administratif",many:"Districts administratifs",abbr:"Dst."},label:"Découpage en districts administratifs (14)",path:"./data/geojson/tmp/civ-adm1-district-r2.geojson",idfield:"code",labelField:"admin1Name"},{id:"layer-4",name:"region_admin",names:{value:"Région administrative",many:"Régions administratives",abbr:"Rgn."},label:"Découpage en régions administratives (33)",path:"./data/geojson/tmp/civ-adm2-region-r2.geojson",idfield:"admin2Pcod",labelField:"admin2Name"}],tables:["demographic","human_ressource","ratio_prestataire_pop","repartition_etabliss_sante","ratio_hrsn_espc_pop","other_material","tech_platform","ratio_ambulance_structure_sante","repartition_struct_transfusion","std","covid-19"],color_palettes:[{name:"YlGnBu"},{name:"YlOrRd"},{name:"Purples"},{name:"PuBu"},{name:"BrBG"},{name:"Greys"}],table_selected:default_table_selection,table_details:[{index:17,name:"covid-19",valid:!0,table_num:"Tableau-99",layerList:["region_admin","district_admin"],label:"0- Incidence nationale de la COVID-19",unit:"nombre de cas",article:"de ",path:"./data/statistics/tab_99_covid.csv",source:"DIIS/INS",data_parser:COVID_PARSER,renderer:{source:"manual",threshold:[1,4,10,100],colormap:["#ffffff","#ffbfbf","#ff8080","#dd4040","#660000"],labelmap:["Aucun cas","Incidence faible","Incidence Moyenne","Incidence forte","Epicentre"],legendtitle:"Incidence de la Covid-19 (nb. cas confirmés)"},layout:"COVID",color_palette:"YlOrRd",field_selected:default_field_selection,data_fields:[{fld_name:"FLD1",short_name:"Nb de cas confirmés",long_name:" Nombre de cas confirmés de COVID-19",data_type:"INT",unit:"cas confirmés"}]},{index:1,valid:!0,name:"demographic",layerList:["district_sante","region_sante"],table_num:"Tableau-DD",label:"1- Données de population (2017)",unit:"population",article:"de ",path:"./data/statistics/tab_01_demography.csv",source:"INS-2017",data_parser:DEFAULT_PARSER,renderer:get_renderer(9,[],["white","red"]),color_palette:"YlGnBu",field_selected:default_field_selection,data_fields:[{fld_name:"FLD1",short_name:"Population totale 2017",long_name:"Population totale 2017",data_type:"INT",unit:"habitants"},{fld_name:"FLD2",short_name:"Population 0 à 11 mois",long_name:"Population 0 à 11 mois",data_type:"INT",unit:"habitants"},{fld_name:"FLD3",short_name:"Population 0 à 4 ans",long_name:"Population 0 à 4 ans",data_type:"INT",unit:"habitants"},{fld_name:"FLD4",short_name:"Population de moins de 15 ans",long_name:"Population de moins de 15 ans",data_type:"INT",unit:"habitants"},{fld_name:"FLD5",short_name:"Population de 15 ans et plus",long_name:"Population de 15 ans et plus",data_type:"INT",unit:"habitants"},{fld_name:"FLD6",short_name:"Nb. de femmes en âge de procréer",long_name:"Femme en âge de procréer",data_type:"INT",unit:"FAP"},{fld_name:"FLD7",short_name:"Nb. de grossesses attendues",long_name:"Grossesses attendues",data_type:"INT",unit:"grossesses attendues"},{fld_name:"FLD8",short_name:"Nb. de naissances attendues",long_name:"Naissances attendues",data_type:"INT",unit:"naissances attendues"},{fld_name:"FLD9",short_name:"Nb. de Complications obstétricales attendues",long_name:"Complications obstétricales attendues",data_type:"INT",unit:"cas de complication attendus"}]},{index:2,valid:!0,name:"human_ressource",layerList:["district_sante","region_sante"],table_num:"Tableau-5",label:"2- Ressources des systèmes de santé - Personnel",unit:"effectif",article:"d'",path:"./data/statistics/tab_05_human_res.csv",source:"DRH/Ministère de la Santé et de l’Hygiène Publique",data_parser:DEFAULT_PARSER,renderer:get_renderer(5,[],["white","red"]),color_palette:"YlOrRd",field_selected:default_field_selection,data_fields:[{fld_name:"FLD1",short_name:"Eff. total des médécins (DRH)",long_name:"Effectif des médécins",data_type:"INT",unit:"médecin(s)"},{fld_name:"FLD2",short_name:"Eff. chirugien-Dentistes",long_name:"Effectif des churigiens dentistes",data_type:"INT",unit:"chirugien-dentiste(s)"},{fld_name:"FLD3",short_name:"Eff. de pharmaciens",long_name:"Effectif des pharmaciens",data_type:"INT",unit:"pharmacien(s)"},{fld_name:"FLD4",short_name:"Eff. en infirmiers diplômés d'état",long_name:"Effectif des infirmiers diplômés d'état",data_type:"INT",unit:"infirmier(s)"},{fld_name:"FLD5",short_name:"Eff. d'infirmiers spécialistes",long_name:"Effectif des infirmiers spécialistes",data_type:"INT",unit:"infirmier(s)"},{fld_name:"FLD6",short_name:"Nb total d'infirmier (DRH)",long_name:"Effectif total des infirmiers",data_type:"INT",unit:"infirmiers"},{fld_name:"FLD7",short_name:"Eff. des sage-femme diplômées d'état",long_name:"Effectif des sages-femmes diplômées d'état",data_type:"INT",unit:"sage(s)-femme(s)"},{fld_name:"FLD8",short_name:"Eff. des sage-femme spécialisées",long_name:"Effectif des sages-femmes spécialistes",data_type:"INT",unit:"sage(s) femme(s)"},{fld_name:"FLD9",short_name:"Eff. total sage-femme (DRH)",long_name:"Effectif total des sages-femmes",data_type:"INT",unit:"sage(s-femme(s)"},{fld_name:"FLD10",short_name:"Eff. techniciens Sup. en santé",long_name:"Effectif des techniciens supérieurs en santé",data_type:"INT",unit:"Tehnicien(s) supérieur(s)"},{fld_name:"FLD11",short_name:"Ingénieurs en santé",long_name:"Effectif des ingénieurs de santé",data_type:"INT",unit:"ingénieur(s) en santé"},{fld_name:"FLD12",short_name:"Aides Soignants",long_name:"Effectif des aides soignants",data_type:"INT",unit:"aides soignants"}]},{index:3,valid:!0,name:"ratio_prestataire_pop",layerList:["district_sante","region_sante"],table_num:"Tableau 6",label:"3- Ratio Prestataires de soins - Population",unit:"nombre",article:"de ",path:"./data/statistics/tab_06_ratio_prestataire_pop.csv",source:"DIIS/INS",data_parser:DEFAULT_PARSER,renderer:get_renderer(5,[],["white","orange"]),color_palette:"BrBG",field_selected:default_field_selection,data_fields:[{fld_name:"FLD1",short_name:"Ratio Population/Médecin",long_name:" Ratio Population par Médecin",data_type:"INT",unit:"habitants par médecin",show_unit:!0},{fld_name:"FLD2",short_name:"Ratio Médecin/Population",long_name:" Ratio Médecin par Population",data_type:"INT",unit:"médecins pour 10 000 habitants",show_unit:!0},{fld_name:"FLD3",short_name:"Ratio population/Infirmier",long_name:" Ratio population par Infirmier",data_type:"INT",unit:"habitants par infirmier",show_unit:!0},{fld_name:"FLD4",short_name:"Ratio Infirmier/Population",long_name:" Ratio Infirmier par population",data_type:"INT",unit:"infirmiers pour 5 000 habitants",show_unit:!0},{fld_name:"FLD5",short_name:"Ratio FAP/Sage-femme",long_name:" Ratio Femme en âge de reproduction par Sage-femme",data_type:"INT",unit:"FAP par sage-femme",show_unit:!0},{fld_name:"FLD6",short_name:"Ratio Sage-femme/FAP",long_name:" Ratio Sagefemme par Femme en âge de reproduction",data_type:"INT",unit:"sage-femme pour 3 300 FAP",show_unit:!0}]},{index:4,valid:!0,name:"repartition_etabliss_sante",layerList:["district_sante","region_sante"],table_num:"Tableau-7",label:"4- Ressources des systèmes de santé - Etablissements",unit:"nombre",article:"de ",path:"./data/statistics/tab_07_repartition_etabliss_sante.csv",source:"DIIS/INS",data_parser:DEFAULT_PARSER,renderer:get_renderer(5,[],["white","orange"]),color_palette:"YlGnBu",field_selected:default_field_selection,data_fields:[{fld_name:"FLD1",short_name:"Nombre d'ESPC Ruraux",long_name:"Etablissements sanitaires de premier contact (Ruraux)",data_type:"INT",unit:"ESPC Ruraux"},{fld_name:"FLD2",short_name:"Nombre d'ESPC Urbain",long_name:"Etablissements sanitaires de premier contact (Urbains)",data_type:"INT",unit:"ESPC urbains"},{fld_name:"FLD3",short_name:"ESPC (total)",long_name:"Nombre total d'établissements sanitaires de premier contact",data_type:"INT",unit:"ESPC"},{fld_name:"FLD4",short_name:"Hopitaux Généraux Publics",long_name:"Hôpitaux généraux Public",data_type:"INT",unit:"hôpitaux publics"},{fld_name:"FLD5",short_name:"HG Privé Confessionnel",long_name:"Hôpitaux généraux privé confessionnel",data_type:"INT",unit:"hôpitaux"},{fld_name:"FLD6",short_name:"Hopitaux Généraux (total)",long_name:"Total HG",data_type:"INT",unit:"Hôpitaux généraux"},{fld_name:"FLD7",short_name:"Nombre de CHR",long_name:" Centres hospitaliers régionaux (CHR)",data_type:"INT",unit:"CHR"},{fld_name:"FLD8",short_name:"Total Hôpitaux de références",long_name:"Nombre total Hôpitaux de références (Publics + Privés + Confessionnels)",data_type:"INT",unit:"Hôpitaux de référence"},{fld_name:"FLD9",short_name:"Nb de centres CHU",long_name:" Centres hospitaliers universitaires (CHU)",data_type:"INT",unit:"CHU"},{fld_name:"FLD10",short_name:"Nb de services de Maternité",long_name:" Service de Maternité",data_type:"INT",unit:"service(s) de maternité"},{fld_name:"FLD11",short_name:"Nb de pharmacies publiques",long_name:" Pharmacie publique",data_type:"INT",unit:"pharmacie(s) publique(s)"},{fld_name:"FLD12",short_name:"Nb de pharmacies privées",long_name:" Pharmacie privée",data_type:"INT",unit:"pharmacie(s) privée(s)"},{fld_name:"FLD13",short_name:"Nb Total de structures Sanitaires (ESPC, HG, CHR et CHU)",long_name:" Total Structures Sanitaires (ESPC, HG, CHR et CHU)",data_type:"INT",unit:"établissements"},{fld_name:"FLD14",short_name:"Total Structures Sanitaires (ESPC, HG, CHR)",long_name:" Total Structures Sanitaires (ESPC, HG, CHR)",data_type:"INT",unit:"établissements"}]},{index:5,valid:!0,name:"ratio_hrsn_espc_pop",layerList:["district_sante","region_sante"],table_num:"Tableau-8",label:"5- Ratio établissements de santé/Population",unit:"nombre",article:"de ",path:"./data/statistics/tab_08_ratio_hrsn_espc_pop.csv",source:"DIIS/INS",data_parser:DEFAULT_PARSER,renderer:get_renderer(5,[],["white","green"]),color_palette:"YlGnBu",field_selected:default_field_selection,data_fields:[{fld_name:"FLD1",short_name:"Ratio Population - ESPC",long_name:" Ratio Population par Etablissement Sanitaire de Premier Contact",data_type:"INT",unit:"habitants pour un ESPC",show_unit:!0},{fld_name:"FLD2",short_name:"Ratio ESPC - Population",long_name:" Ratio Etablissement Sanitaire de Premier Contact pour 10 000 habitants",data_type:"INT",unit:"ESPC pour 10 000 habitants",show_unit:!0},{fld_name:"FLD3",short_name:"Ratio Population - Hôpital de référence",long_name:" Ratio Population pour 1 Hôpital de référence",data_type:"INT",unit:"habitants par hôpital de réf.",show_unit:!0},{fld_name:"FLD4",short_name:"Ratio Hôpital de référence - Population",long_name:" Ratio Hôpital de référence pour 150 000 habitants",data_type:"INT",unit:"hôpitaux pour 150 000 habitants",show_unit:!0}]},{index:6,valid:!0,name:"other_material",layerList:["district_sante","region_sante"],table_num:"Tableau-9",label:"6- Autres ressources materielles (2017)",unit:"nombre",article:"de ",path:"./data/statistics/tab_09_other_material.csv",data_parser:DEFAULT_PARSER,renderer:get_renderer(5,[],["white","blue"]),source:"DIIS/INS",color_palette:"YlGnBu",field_selected:default_field_selection,data_fields:[{fld_name:"FLD1",short_name:"Nb de véhicules",long_name:"Nombre de véhicules",data_type:"INT",unit:"véhicule(s)"},{fld_name:"FLD2",short_name:"Nb d'ambulances",long_name:"Nombre d'ambulances ",data_type:"INT",unit:"ambulance(s)"},{fld_name:"FLD3",short_name:"Nb de motos",long_name:"Nombre de motos 2017",data_type:"INT",unit:"moto(s)"},{fld_name:"FLD4",short_name:"Nb d'ordinateurs",long_name:" Ordinateurs ",data_type:"INT",unit:"ordinateur(s)"},{fld_name:"FLD5",short_name:"Nb de réfrigérateurs",long_name:" Refrigerateur ",data_type:"INT",unit:"réfrigérateur(s)"},{fld_name:"FLD6",short_name:"Nb de congélateurs",long_name:"Nombre de congélateurs",data_type:"INT",unit:"congélateur(s)"}]},{index:7,valid:!0,name:"tech_platform",layerList:["district_sante","region_sante"],table_num:"Tableau-10",label:"7- Plateaux techniques et équipements (2017)",unit:"nombre",article:"de ",path:"./data/statistics/tab_10_tech_platform.csv",source:"DIIS/INS",data_parser:DEFAULT_PARSER,renderer:get_renderer(5,[],["white","blue"]),color_palette:"YlGnBu",field_selected:default_field_selection,data_fields:[{fld_name:"FLD1",short_name:"Nb total labo. d'analyse",long_name:"Nombre de laboratoires d'analyse existants",data_type:"INT",unit:"laboratoire(s)"},{fld_name:"FLD2",short_name:"Nb labo. d'analyse fonctionnels",long_name:"Nombre de laboratoires d'analyse fonctionnels",data_type:"INT",unit:"laboratoire(s)"},{fld_name:"FLD3",short_name:"Nb labo. d'analyse non Fonctionnels",long_name:"Nombre de laboratoires d'analyse non fonctionnels",data_type:"INT",unit:"laboratoire(s)"},{fld_name:"FLD4",short_name:"Nb total blocs Opér.",long_name:"Nombre de blocs opératoires existant",data_type:"INT",unit:"bloc(s)"},{fld_name:"FLD5",short_name:"Nb blocs Opér. fonctionnels",long_name:"Nombre de blocs opératoires fonctionnels",data_type:"INT",unit:"bloc(s)"},{fld_name:"FLD6",short_name:"Nb blocs Opér. non fonctionnels",long_name:"Nombre de blocs opératoires non fonctionnels",data_type:"INT",unit:"blocs opératoire(s)"},{fld_name:"FLD7",short_name:"Nb total de services radio.",long_name:"Nombre de services de radiologie existants",data_type:"INT",unit:"service(s)"},{fld_name:"FLD8",short_name:"Nb services radio fonctionnels",long_name:"Nombre de services de radiologie fonctionnels",data_type:"INT",unit:"service(s)"},{fld_name:"FLD9",short_name:"Nb service radio non fonctionnels",long_name:"Nombre de services de radiologie non fonctionnels",data_type:"INT",unit:"service(s)"},{fld_name:"FLD10",short_name:"Nb total Cab dentaires",long_name:"Nombre de cabinets dentaires existant",data_type:"INT",unit:"Nombre de cabinets"},{fld_name:"FLD11",short_name:"Nb cab dentaires fonctionnels",long_name:"Nombre de cabinets dentaires onctionnels",data_type:"INT",unit:"Cabinet(s)"},{fld_name:"FLD12",short_name:"Nb cab dentaires non fonctionnels ",long_name:"Nombre de cabinets dentaires non fonctionnels ",data_type:"INT",unit:"cabinet(s)"}]},{index:8,valid:!0,name:"ratio_ambulance_structure_sante",table_num:"Tableau-11",layerList:["region_sante","district_sante"],label:"8- Ratio ambulance par nombre de structure de soin (tab 11)",unit:"nombre",article:"de ",path:"./data/statistics/tab_11_ratio_ambulance_structure_sante.csv",source:"DIIS/INS",data_parser:DEFAULT_PARSER,renderer:get_renderer(10,[],["white","violet"]),color_palette:"Purples",field_selected:default_field_selection,data_fields:[{fld_name:"FLD1",short_name:"Total Structures Sanitaires (ESPC,HG, CHR)",long_name:" Total Structures Sanitaires (ESPC,HG, CHR)",data_type:"INT",unit:"Nombre"},{fld_name:"FLD2",short_name:"Nb Ambulances (2017)",long_name:" Nb total d'ambulances en 2017",data_type:"INT",unit:"Nombre"},{fld_name:"FLD3",short_name:"Ratio Ambulances / Structures de soins",long_name:" Ratio Ambulances par Structures de soins (ESPC, HG et CHR)",data_type:"INT",unit:"ratio"},{fld_name:"FLD4",short_name:"Ratio structures de soins pour une Ambulances",long_name:" Ratio nombre de structures de soins (ESPC, HG et CHR) pour une Ambulances",data_type:"INT",unit:"ratio"}]},{index:9,valid:!1,name:"repartition_struct_transfusion",layerList:["region_sante","district_sante"],table_num:"Tableau-12",adminlevels:["district","region"],label:"9- Répartition géographique des dépôts/banques de sang (tab. 12)",unit:"nombre",article:"de ",path:"./data/statistics/tab_12_repartition_structure_transfusion.csv",source:"DIIS/INS",data_parser:DEFAULT_PARSER,renderer:get_renderer(5,[],["white","blue"]),color_palette:"YlGnBu",field_selected:default_field_selection,data_fields:[{fld_name:"FLD1",short_name:"Nombre de CTS",long_name:"Nombre de Centre de Transfusion Sanguine",data_type:"INT",unit:"nombre"},{fld_name:"FLD2",short_name:"Nombre de ATS",long_name:"Nombre d'Antenne de Transfusion Sanguine",data_type:"INT",unit:"nombre"},{fld_name:"FLD3",short_name:"Nombre de dépôts/Banques de sang",long_name:"Nombre de dépôts/Banques de sang",data_type:"INT",unit:"nombre"}]},{index:10,valid:!1,name:"xxxxxxxxxxxxxxxxx",table_num:"Tableau-13",layerList:["region_sante","district_sante"],adminlevels:["region","district"],label:"xxxxxx",unit:"Données du tableau 13",article:"de ",path:"./data/statistics/tab_xx_axxxxxxx.csv",source:"DIIS/INS",data_parser:DEFAULT_PARSER,renderer:get_renderer(5,[],["white","blue"]),color_palette:"YlGnBu",field_selected:default_field_selection,data_fields:[{fld_name:"FLD1",short_name:"Population à moins de 5 km d'un centre de santé (%)",long_name:"Population à moins de 5 km d'un centre de santé (%)",data_type:"INT",unit:"nombre"},{fld_name:"FLD2",short_name:"Population entre 5 et 15 km d'un centre de santé (%)",long_name:"Population entre 5 et 15 km d'un centre de santé (%)",data_type:"INT",unit:"nombre"},{fld_name:"FLD3",short_name:"Population au délà de 15 km d'un centre de santé (%)",long_name:"Population au délà de 15 km d'un centre de santé (%)",data_type:"INT",unit:"nombre"},{fld_name:"FLD4",short_name:"Population au délà de 5 km d'un centre de santé (%)",long_name:"Population au délà de 5 km d'un centre de santé (%)",data_type:"INT",unit:"nombre"}]},{index:11,name:"std",valid:!1,table_num:"Tableau-45",layerList:["region_sante","district_sante"],adminlevels:["region","district"],label:"Maladies sexuellement transmissibles",unit:"cas déclaré(s)",article:"de ",path:"./data/statistics/tab_45_std.csv",source:"Ministère de la Santé et de l’Hygiène Publique",data_parser:DEFAULT_PARSER,renderer:get_renderer(5,[],["white","blue"]),color_palette:"Purples",field_selected:default_field_selection,data_fields:[{fld_name:"FLD1",short_name:" 10-14 ans (F)",long_name:" 10-14 ans (F)",data_type:"INT",unit:"Nombre de cas"},{fld_name:"FLD2",short_name:" 10-14 ans (M)",long_name:" 10-14 ans (M)",data_type:"INT",unit:"Nombre de cas"},{fld_name:"FLD3",short_name:" 15-24 ans (F)",long_name:" 15-24 ans (F)",data_type:"INT",unit:"Nombre de cas"},{fld_name:"FLD4",short_name:" 15-24 ans (M)",long_name:" 15-24 ans (M)",data_type:"INT",unit:"Nombre de cas"},{fld_name:"FLD5",short_name:" 25-49 ans (F)",long_name:" 25-49 ans (F)",data_type:"INT",unit:"Nombre de cas"},{fld_name:"FLD6",short_name:" 25-49 ans (M)",long_name:" 25-49 ans (M)",data_type:"INT",unit:"Nombre de cas"},{fld_name:"FLD7",short_name:" 50 ans et plus (F)",long_name:" 50 ans et plus (F)",data_type:"INT",unit:"Nombre de cas"},{fld_name:"FLD8",short_name:" 50 ans et plus (M)",long_name:" 50 ans et plus (M)",data_type:"INT",unit:"Nombre de cas"},{fld_name:"FLD9",short_name:" Total cas d’écoulement génital ",long_name:" Total de cas d’écoulement génital (urétral /vaginal) diagnostiqués",data_type:"INT",unit:"Nombre de cas"},{fld_name:"FLD10",short_name:" 10-14 ans (F)",long_name:" 10-14 ans (F)",data_type:"INT",unit:"Nombre de cas"},{fld_name:"FLD11",short_name:" 10-14 ans (M)",long_name:" 10-14 ans (M)",data_type:"INT",unit:"Nombre de cas"},{fld_name:"FLD12",short_name:" 15-24 ans (F)",long_name:" 15-24 ans (F)",data_type:"INT",unit:"Nombre de cas"},{fld_name:"FLD13",short_name:" 15-24 ans (M)",long_name:" 15-24 ans (M)",data_type:"INT",unit:"Nombre de cas"},{fld_name:"FLD14",short_name:" 25-49 ans (F)",long_name:" 25-49 ans (F)",data_type:"INT",unit:"Nombre de cas"},{fld_name:"FLD15",short_name:" 25-49 ans (M)",long_name:" 25-49 ans (M)",data_type:"INT",unit:"Nombre de cas"},{fld_name:"FLD16",short_name:" 50 ans et plus (F)",long_name:" 50 ans et plus (F)",data_type:"INT",unit:"Nombre de cas"},{fld_name:"FLD17",short_name:" 50 ans et plus (M)",long_name:" 50 ans et plus (M)",data_type:"INT",unit:"Nombre de cas"},{fld_name:"FLD18",short_name:" Total cas d’ulcération génitale",long_name:" Total de cas d’ulcération génitale et/ou bubon diagnostiqués",data_type:"INT",unit:"Nombre de cas"},{fld_name:"FLD19",short_name:" 10-14 ans (F)",long_name:" 10-14 ans (F)",data_type:"INT",unit:"Nombre de cas"},{fld_name:"FLD20",short_name:" 10-14 ans (M)",long_name:" 10-14 ans (M)",data_type:"INT",unit:"Nombre de cas"},{fld_name:"FLD21",short_name:" 15-24 ans (F)",long_name:" 15-24 ans (F)",data_type:"INT",unit:"Nombre de cas"},{fld_name:"FLD22",short_name:" 15-24 ans (M)",long_name:" 15-24 ans (M)",data_type:"INT",unit:"Nombre de cas"},{fld_name:"FLD23",short_name:" 25-49 ans (F)",long_name:" 25-49 ans (F)",data_type:"INT",unit:"Nombre de cas"},{fld_name:"FLD24",short_name:" 25-49 ans (M)",long_name:" 25-49 ans (M)",data_type:"INT",unit:"Nombre de cas"},{fld_name:"FLD25",short_name:" 50 ans et plus (F)",long_name:" 50 ans et plus (F)",data_type:"INT",unit:"Nombre de cas"},{fld_name:"FLD26",short_name:" 50 ans et plus (M)",long_name:" 50 ans et plus (M)",data_type:"INT",unit:"Nombre de cas"},{fld_name:"FLD27",short_name:" Total cas de douleurs testiculaires ou pelviennes",long_name:" Total de cas de douleurs testiculaires/abdominales basses (pelviennes) diagnostiqués",data_type:"INT",unit:"Nombre de cas"},{fld_name:"FLD28",short_name:" 10-14 ans (F)",long_name:" 10-14 ans (F)",data_type:"INT",unit:"Nombre de cas"},{fld_name:"FLD29",short_name:" 10-14 ans (M)",long_name:" 10-14 ans (M)",data_type:"INT",unit:"Nombre de cas"},{fld_name:"FLD30",short_name:" 15-24 ans (F)",long_name:" 15-24 ans (F)",data_type:"INT",unit:"Nombre de cas"},{fld_name:"FLD31",short_name:" 15-24 ans (M)",long_name:" 15-24 ans (M)",data_type:"INT",unit:"Nombre de cas"},{fld_name:"FLD32",short_name:" 25-49 ans (F)",long_name:" 25-49 ans (F)",data_type:"INT",unit:"Nombre de cas"},{fld_name:"FLD33",short_name:" 25-49 ans (M)",long_name:" 25-49 ans (M)",data_type:"INT",unit:"Nombre de cas"},{fld_name:"FLD34",short_name:" 50 ans et plus (F)",long_name:" 50 ans et plus (F)",data_type:"INT",unit:"Nombre de cas"},{fld_name:"FLD35",short_name:" 50 ans et plus (M)",long_name:" 50 ans et plus (M)",data_type:"INT",unit:"Nombre de cas"},{fld_name:"FLD36",short_name:" Total cas de condylome",long_name:" Total de cas de condylome diagnostiqués",data_type:"INT",unit:"Nombre de cas"},{fld_name:"FLD37",short_name:" Total cas d'IST Adultes (2017)",long_name:" Nombre total des cas d'IST chez les Adultes 2017",data_type:"INT",unit:"Nombre de cas"},{fld_name:"FLD38",short_name:" Nb total cas de conjonctivite du nouveau-né (F)",long_name:" Nombre total de cas de  conjonctivite du nouveau-né diagnostiqués (Enfant 0-28 jours ) (F)",data_type:"INT",unit:"Nombre de cas"},{fld_name:"FLD39",short_name:" Nb total de cas de conjonctivite (M)",long_name:" Nombre total de cas de conjonctivite du nouveau-né diagnostiqués (Enfant 0-28 jours ) (M)",data_type:"INT",unit:"Nombre de cas"}]},{index:12,name:"xxxxxxxxxxxxxxxxx",valid:!1,table_num:"Tableau-14",layerList:["region_sante","district_sante"],adminlevels:["region","district"],label:"xxxxxx",unit:"nombre",article:"de ",path:"./data/statistics/tab_xx_axxxxxxx.csv",source:"DIIS/INS",data_parser:DEFAULT_PARSER,renderer:get_renderer(5,[],["white","yellow"]),color_palette:"YlGnBu",field_selected:default_field_selection,data_fields:[{fld_name:"FLD1",short_name:"Population totale 2017",long_name:"Population totale 2017",data_type:"INT",unit:"nombre"},{fld_name:"FLD2",short_name:"Nombre total de Consultants 2017",long_name:"Nombre total de Consultants 2017",data_type:"INT",unit:"nombre"},{fld_name:"FLD3",short_name:"Taux d'utilisation 2017(%)",long_name:"Taux d'utilisation 2017(%)",data_type:"INT",unit:"nombre"}]},{index:13,name:"xxxxxxxxxxxxxxxxx",valid:!1,layerList:["region_sante","district_sante"],table_num:"Tableau-15",adminlevels:["region","district"],label:"xxxxxx",unit:"nombre",article:"de ",path:"./data/statistics/tab_xx_axxxxxxx.csv",source:"DIIS/INS",data_parser:DEFAULT_PARSER,renderer:get_renderer(5,[],["white","blue"]),color_palette:"YlGnBu",field_selected:default_field_selection,data_fields:[{fld_name:"FLD1",short_name:"Population totale 2017",long_name:"Population totale 2017",data_type:"INT",unit:"nombre"},{fld_name:"FLD2",short_name:"Nombre total de Consultants ESPC 2017",long_name:"Nombre total de Consultants ESPC 2017",data_type:"INT",unit:"nombre"},{fld_name:"FLD3",short_name:"Taux d'utilisation ESPC 2017 (%)",long_name:"Taux d'utilisation ESPC 2017 (%)",data_type:"INT",unit:"nombre"},{fld_name:"FLD4",short_name:"Nombre total de Consultants Hopitaux de reference (HG & CHR) 2017",long_name:"Nombre total de Consultants Hopitaux de reference (HG & CHR) 2017",data_type:"INT",unit:"nombre"},{fld_name:"FLD5",short_name:"Taux d'utilisation HR (HG&2017 (%)",long_name:"Taux d'utilisation HR (HG&2017 (%)",data_type:"INT",unit:"nombre"}]},{index:14,name:"xxxxxxxxxxxxxxxxx",valid:!1,table_num:"Tableau-16",layerList:["region_sante","district_sante"],adminlevels:["region","district"],label:"xxxxxx",unit:"nombre",article:"de ",path:"./data/statistics/tab_xx_axxxxxxx.csv",source:"DIIS/INS",data_parser:DEFAULT_PARSER,renderer:get_renderer(5,[],["white","black"]),color_palette:"YlGnBu",field_selected:default_field_selection,data_fields:[{fld_name:"FLD1",short_name:"Population totale",long_name:" Population totale",data_type:"INT",unit:"nombre"},{fld_name:"FLD2",short_name:"Nombre de Consultations 2017",long_name:"Nombre de Consultations 2017",data_type:"INT",unit:"nombre"},{fld_name:"FLD3",short_name:"Taux de fréquentation 2017 (%)",long_name:"Taux de fréquentation 2017 (%)",data_type:"INT",unit:"nombre"}]},{index:15,name:"xxxxxxxxxxxxxxxxx",valid:!1,table_num:"Tableau-17",layerList:["region_sante","district_sante"],adminlevels:["region","district"],label:"xxxxxx",unit:"nombre",article:"de ",path:"./data/statistics/tab_xx_axxxxxxx.csv",source:"DIIS/INS",data_parser:DEFAULT_PARSER,renderer:get_renderer(5,[],["white","cyan"]),color_palette:"YlGnBu",field_selected:default_field_selection,data_fields:[{fld_name:"FLD1",short_name:"Population totale 2017",long_name:"Population totale 2017",data_type:"INT",unit:"nombre"},{fld_name:"FLD2",short_name:"Total Consultations ESPC 2017",long_name:"Total Consultations ESPC 2017",data_type:"INT",unit:"nombre"},{fld_name:"FLD3",short_name:"Taux de frequentation ESPC",long_name:"Taux de frequentation ESPC",data_type:"INT",unit:"nombre"},{fld_name:"FLD4",short_name:"Nombre total de consultation HR (CHR&HG) 2017",long_name:"Nombre total de consultation HR (CHR&HG) 2017",data_type:"INT",unit:"nombre"},{fld_name:"FLD5",short_name:"Taux de frequentation HR (HG&CHR) 2017 (%)",long_name:"Taux de frequentation HR (HG&CHR) 2017 (%)",data_type:"INT",unit:"nombre"}]},{index:16,name:"xxxxxxxxxxxxxxxxx",valid:!1,table_num:"Tableau-18",layerList:["region_sante","district_sante"],adminlevels:["region","district"],label:"xxxxxx",unit:"nombre",article:"de ",path:"./data/statistics/tab_xx_axxxxxxx.csv",source:"DIIS/INS",renderer:get_renderer(5,[],["white","blue"]),color_palette:"YlGnBu",field_selected:default_field_selection,data_fields:[{fld_name:"FLD1",short_name:"Nombre total de consultants ESPC 2017",long_name:"Nombre total de consultants ESPC 2017",data_type:"INT",unit:"nombre"},{fld_name:"FLD2",short_name:"Nombre Total Consultants HG et CHR 2017",long_name:"Nombre Total Consultants HG et CHR 2017",data_type:"INT",unit:"nombre"},{fld_name:"FLD3",short_name:"Nombre Total Consultants EPN/CHU 2017",long_name:"Nombre Total Consultants EPN/CHU 2017",data_type:"INT",unit:"nombre"},{fld_name:"FLD4",short_name:"Total Consultants 2017",long_name:"Total Consultants 2017",data_type:"INT",unit:"nombre"},{fld_name:"FLD5",short_name:"Proportion Consultants ESPC 2017 (%)",long_name:"Proportion Consultants ESPC 2017 (%)",data_type:"INT",unit:"nombre"},{fld_name:"FLD6",short_name:"Proportion Consultants HG & CHR 2017 (%)",long_name:"Proportion Consultants HG & CHR 2017 (%)",data_type:"INT",unit:"nombre"}]}]},tmplt_details_hard='\n\t<div class="pane-header">\n\t \t<span>\n\t \t\t<strong> {{ ADM_NAME }} </strong> \n\t \t</span>\n\t \t<a href="#" id="close-details"  onclick="hideDetails(); return false;">    \n\t \t\t<i class="fa fa-window-close fa-1x"></i>  \n\t \t</a>\n\t </div>\n\t <div class="enveloppe">\n\t\t <table class="detail-table">\n\t\t \t{{{ HTML_TABLE_ROWS}}}\n\t\t </table>\n\t</div>\t',tmplt_key_select='\n\t<label for="var_selector"> Choisir l\'indicateur à cartographier : </label><br/>\n\t<select id="select-key" name="var_selector" >\n\t\t{{#data_fields}}\n\t\t \t<option value = "{{fld_name}}"" {{field_selected}}> {{short_name}}  </option>\n\t\t{{/data_fields}}\n\t</select>\n',tmplt_table_select='\n\t<label for="table_selector"> Choisir une thématique : </label><br/>\n\t<select id="select-table" name="table_selector" >\n\t\t{{#table_details}}\n\t\t     {{#valid}}<option value = "{{name}}"" {{table_selected}}> {{label}} </option>{{/valid}}\n\t\t{{/table_details}}\n\t</select>\n',tmplt_palette_select='\n\t<nav id="main_nav">\n\t  <ul>\n\t    <li>\n\t\t\t<a> Modifier la palette </a>\n\t\t  <ul>\n\t\t\t{{#color_palettes}}\n\t\t\t\t<li class="x{{name}}"><a href="#/action/select-palette/{{name}}">{{name}}<br>\n\t\t\t \t\t<span class="color-cll  q0-9"> </span>\n\t\t\t \t\t<span class="color-cll  q1-9"> </span>\n\t\t\t \t\t<span class="color-cll  q2-9"> </span>\n\t\t\t \t\t<span class="color-cll  q3-9"> </span> \n\t\t\t \t\t<span class="color-cll  q4-9"> </span> \n\t\t\t \t\t<span class="color-cll  q5-9"> </span> \n\t\t\t \t\t<span class="color-cll  q6-9"> </span> \n\t\t\t \t\t<span class="color-cll  q7-9"> </span> \n\t\t\t \t\t<span class="color-cll  q8-9"> </span> </a>\n\t\t  \t\t</li> <br>\n\t\t\t{{/color_palettes}}\n\t\t  </ul>\n\t    </li>\n\t  </ul>\n\t</nav>\n\t',tmplt_sysinfos='\n\t\t\t <div class="pane-header">\n\t\t\t \t<span>\n\t\t\t \t\t<strong> SYS INFOS </strong> \n\t\t\t \t</span>\n\t\t\t \t<a href="#" class="close-bttn"  onclick="hideSysInfos(); return false;">    \n\t\t\t \t\t<i class="fa fa-window-close fa-1x"></i>  \n\t\t\t \t</a>\n\t\t\t </div>\n\t\t\t <div class="enveloppe">\n\t\t\t\t<table class="detail-table">\n\n\t\t\t\t\t<tr><th colspan="2"> View settings </th> </tr>\n\t\t\t\t\t<tr><th> svg size : </th> <td> W: {{ svg_width }}; H: {{svg_height}} </td>\t</tr>\n\t\t\t\t\t<tr><th> Range : </th> <td>  {{range}} </td></tr>\n\t\t\t\t\t<tr><th> Domain values : </th> <td> {{domain}} </td></tr>\t\n\n\t\t\t\t\t<tr><th colspan="2"> Current Table properties </th> </tr>\t\n\t\t\t\t\t<tr><th> Table name :  </th> <td>{{table.name}}   </td></tr>\t \t\t\n\t\t\t\t\t<tr><th> Table number :</th> <td>{{table.table_num }}   </td></tr>\t \t\t\n\t\t\t\t\t<tr><th> Title :       </th> <td>{{table.label}}   </td></tr>\t \t\t\n\t\t\t\t\t<tr><th> File path :   </th> <td>{{table.path}} </td></tr>\t \t\t\n\t\t\t\t\t<tr><th> Data source : </th> <td>{{table.source}} </td></tr>\t \t\t\n\n\t\t\t\t\t<tr><th colspan="2"> Current field properties </th> </tr>\t \t\t\n\t\t\t\t\t<tr><th> key name : </th>    <td>    {{field.fld_name}}   </td></tr>\t \t\t\n\t\t\t\t\t<tr><th> Short name : </th> <td>    {{field.short_name}} </td></tr>\t \t\t\n\t\t\t\t\t<tr><th> Long name : </th> <td>    {{field.long_name}} </td></tr>\t \t\t\n\t\t\t\t\t<tr><th> Unit : </th> <td>    {{field.unit}} </td></tr>\t \t\t\n\t\t\t\t</table>\n\t\t\t</div>';Mustache.parse(tmplt_details_hard),Mustache.parse(tmplt_key_select),Mustache.parse(tmplt_table_select),Mustache.parse(tmplt_table_select),Mustache.parse(tmplt_sysinfos);var include_button_input,upcoming_function,random_data=get_data(),my_scale=d3.time.scale().domain([Date.now(),Date.now()+18e5]).range([0,random_data.length]);function get_random_data(){return random_data.map(function(e,t){return e.id=t,e.when=my_scale.invert(t),e.alive=Math.round(.065*e.alive),e.iddle=Math.round(.3*e.iddle),e.total=e.alive+e.iddle,e})}function get_data(){return[{alive:52,iddle:17},{alive:53,iddle:17},{alive:71,iddle:13},{alive:88,iddle:12},{alive:138,iddle:11},{alive:171,iddle:11},{alive:208,iddle:10},{alive:258,iddle:10},{alive:305,iddle:10},{alive:344,iddle:9},{alive:370,iddle:9},{alive:382,iddle:9},{alive:385,iddle:9},{alive:385,iddle:9},{alive:381,iddle:9},{alive:374,iddle:9},{alive:363,iddle:10},{alive:352,iddle:10},{alive:343,iddle:10},{alive:335,iddle:10},{alive:329,iddle:10},{alive:323,iddle:10},{alive:320,iddle:10},{alive:318,iddle:10},{alive:316,iddle:11},{alive:316,iddle:11},{alive:316,iddle:11},{alive:316,iddle:11},{alive:316,iddle:11},{alive:318,iddle:11},{alive:322,iddle:11},{alive:332,iddle:11},{alive:338,iddle:11},{alive:345,iddle:11},{alive:347,iddle:11},{alive:347,iddle:11},{alive:345,iddle:11},{alive:337,iddle:11},{alive:326,iddle:11},{alive:317,iddle:11},{alive:308,iddle:11},{alive:299,iddle:12},{alive:297,iddle:12},{alive:296,iddle:12},{alive:296,iddle:12},{alive:298,iddle:12},{alive:300,iddle:12},{alive:303,iddle:12},{alive:305,iddle:12},{alive:308,iddle:12},{alive:308,iddle:12},{alive:308,iddle:12},{alive:306,iddle:12},{alive:304,iddle:12},{alive:300,iddle:12},{alive:298,iddle:12},{alive:297,iddle:13},{alive:295,iddle:13},{alive:295,iddle:13},{alive:295,iddle:13},{alive:295,iddle:13},{alive:297,iddle:13},{alive:300,iddle:13},{alive:302,iddle:13},{alive:303,iddle:13},{alive:304,iddle:13},{alive:304,iddle:13},{alive:303,iddle:13},{alive:299,iddle:13},{alive:293,iddle:14},{alive:284,iddle:14},{alive:276,iddle:14},{alive:272,iddle:14},{alive:270,iddle:14},{alive:268,iddle:14},{alive:268,iddle:14},{alive:268,iddle:14},{alive:268,iddle:14},{alive:271,iddle:14},{alive:276,iddle:14},{alive:280,iddle:14},{alive:281,iddle:14},{alive:281,iddle:14},{alive:279,iddle:14},{alive:278,iddle:14},{alive:277,iddle:14},{alive:276,iddle:14},{alive:276,iddle:14},{alive:276,iddle:14},{alive:276,iddle:15},{alive:276,iddle:15},{alive:276,iddle:15},{alive:276,iddle:15},{alive:276,iddle:15},{alive:276,iddle:15},{alive:276,iddle:15},{alive:276,iddle:15},{alive:276,iddle:15},{alive:276,iddle:15},{alive:276,iddle:15},{alive:273,iddle:16},{alive:272,iddle:16},{alive:271,iddle:16},{alive:270,iddle:16},{alive:270,iddle:16},{alive:270,iddle:16},{alive:270,iddle:16},{alive:270,iddle:16},{alive:270,iddle:17},{alive:270,iddle:17},{alive:271,iddle:17},{alive:272,iddle:17},{alive:274,iddle:17},{alive:275,iddle:17},{alive:276,iddle:17},{alive:276,iddle:17},{alive:276,iddle:17},{alive:276,iddle:17},{alive:275,iddle:17},{alive:274,iddle:18},{alive:273,iddle:18},{alive:273,iddle:18},{alive:273,iddle:18},{alive:274,iddle:18},{alive:275,iddle:18},{alive:279,iddle:18},{alive:283,iddle:18},{alive:287,iddle:19},{alive:290,iddle:19},{alive:292,iddle:19},{alive:293,iddle:19},{alive:294,iddle:19},{alive:294,iddle:19},{alive:294,iddle:19},{alive:299,iddle:19},{alive:303,iddle:19},{alive:310,iddle:19},{alive:317,iddle:19},{alive:324,iddle:19},{alive:334,iddle:20},{alive:343,iddle:20},{alive:347,iddle:20},{alive:348,iddle:20},{alive:347,iddle:20},{alive:343,iddle:20},{alive:337,iddle:20},{alive:334,iddle:20},{alive:332,iddle:20},{alive:331,iddle:20},{alive:329,iddle:20},{alive:329,iddle:20},{alive:329,iddle:20},{alive:333,iddle:21},{alive:346,iddle:21},{alive:367,iddle:22},{alive:392,iddle:22},{alive:410,iddle:22},{alive:435,iddle:23},{alive:453,iddle:23},{alive:460,iddle:23},{alive:462,iddle:23},{alive:463,iddle:23},{alive:464,iddle:23},{alive:462,iddle:23},{alive:459,iddle:23},{alive:456,iddle:23},{alive:453,iddle:23},{alive:448,iddle:23},{alive:444,iddle:23},{alive:439,iddle:24},{alive:435,iddle:24},{alive:432,iddle:24},{alive:432,iddle:24},{alive:429,iddle:24},{alive:428,iddle:24},{alive:427,iddle:24},{alive:425,iddle:24},{alive:424,iddle:24},{alive:424,iddle:25},{alive:423,iddle:25},{alive:422,iddle:25},{alive:422,iddle:25},{alive:422,iddle:25},{alive:422,iddle:25},{alive:424,iddle:25},{alive:425,iddle:25},{alive:426,iddle:25},{alive:427,iddle:25},{alive:428,iddle:25},{alive:429,iddle:25},{alive:432,iddle:25},{alive:436,iddle:25},{alive:443,iddle:25},{alive:451,iddle:25},{alive:461,iddle:25},{alive:470,iddle:25},{alive:474,iddle:25},{alive:477,iddle:25},{alive:478,iddle:25},{alive:479,iddle:25},{alive:479,iddle:25},{alive:477,iddle:25},{alive:475,iddle:26},{alive:473,iddle:26},{alive:472,iddle:26},{alive:471,iddle:26},{alive:471,iddle:26},{alive:470,iddle:26},{alive:469,iddle:26},{alive:467,iddle:26},{alive:463,iddle:25},{alive:460,iddle:25},{alive:454,iddle:25},{alive:442,iddle:25},{alive:432,iddle:24},{alive:421,iddle:24},{alive:412,iddle:24},{alive:408,iddle:24},{alive:406,iddle:24},{alive:407,iddle:24},{alive:411,iddle:24},{alive:415,iddle:24},{alive:420,iddle:24},{alive:426,iddle:24},{alive:428,iddle:24},{alive:429,iddle:24},{alive:430,iddle:23},{alive:431,iddle:23},{alive:431,iddle:23},{alive:431,iddle:23},{alive:431,iddle:23},{alive:431,iddle:23},{alive:426,iddle:23},{alive:420,iddle:23},{alive:415,iddle:23},{alive:407,iddle:23},{alive:404,iddle:23},{alive:402,iddle:23},{alive:399,iddle:22},{alive:397,iddle:22},{alive:394,iddle:22},{alive:393,iddle:22},{alive:392,iddle:22},{alive:392,iddle:22},{alive:390,iddle:22},{alive:389,iddle:22},{alive:388,iddle:22},{alive:387,iddle:22},{alive:385,iddle:22},{alive:382,iddle:22},{alive:379,iddle:22},{alive:378,iddle:22},{alive:377,iddle:22},{alive:376,iddle:22},{alive:374,iddle:22},{alive:373,iddle:23},{alive:373,iddle:23},{alive:373,iddle:23},{alive:373,iddle:23},{alive:373,iddle:23},{alive:373,iddle:24},{alive:375,iddle:24},{alive:381,iddle:24},{alive:394,iddle:25},{alive:410,iddle:25},{alive:424,iddle:25},{alive:434,iddle:25},{alive:442,iddle:25},{alive:443,iddle:25},{alive:444,iddle:25},{alive:444,iddle:25},{alive:443,iddle:25},{alive:438,iddle:25},{alive:434,iddle:25},{alive:430,iddle:25},{alive:427,iddle:25},{alive:424,iddle:25},{alive:422,iddle:25},{alive:420,iddle:25},{alive:418,iddle:25},{alive:417,iddle:25},{alive:416,iddle:25},{alive:415,iddle:25},{alive:413,iddle:25},{alive:412,iddle:25},{alive:409,iddle:25},{alive:407,iddle:25},{alive:404,iddle:25},{alive:401,iddle:25},{alive:397,iddle:25},{alive:394,iddle:25},{alive:391,iddle:25},{alive:389,iddle:25},{alive:388,iddle:25},{alive:387,iddle:25},{alive:385,iddle:25},{alive:384,iddle:25},{alive:382,iddle:25},{alive:379,iddle:24},{alive:378,iddle:24},{alive:377,iddle:24},{alive:375,iddle:24},{alive:375,iddle:24},{alive:374,iddle:24},{alive:374,iddle:23},{alive:373,iddle:23},{alive:373,iddle:23},{alive:371,iddle:23},{alive:371,iddle:23},{alive:369,iddle:22},{alive:368,iddle:22},{alive:367,iddle:22},{alive:366,iddle:22},{alive:364,iddle:22},{alive:364,iddle:21},{alive:363,iddle:21},{alive:362,iddle:21},{alive:360,iddle:21},{alive:358,iddle:21},{alive:355,iddle:21},{alive:350,iddle:21},{alive:346,iddle:21},{alive:340,iddle:21},{alive:335,iddle:21},{alive:331,iddle:21},{alive:329,iddle:21},{alive:328,iddle:21},{alive:325,iddle:21},{alive:324,iddle:21},{alive:321,iddle:21},{alive:318,iddle:21},{alive:316,iddle:21},{alive:312,iddle:21},{alive:310,iddle:21},{alive:307,iddle:21},{alive:305,iddle:21},{alive:303,iddle:21},{alive:300,iddle:21},{alive:298,iddle:21},{alive:297,iddle:21},{alive:296,iddle:21},{alive:295,iddle:21},{alive:293,iddle:21},{alive:292,iddle:21},{alive:289,iddle:21},{alive:285,iddle:21},{alive:281,iddle:21},{alive:275,iddle:21},{alive:271,iddle:21},{alive:268,iddle:21},{alive:267,iddle:21},{alive:266,iddle:21},{alive:266,iddle:21},{alive:264,iddle:21},{alive:264,iddle:21},{alive:264,iddle:21},{alive:263,iddle:20},{alive:260,iddle:20},{alive:260,iddle:20},{alive:259,iddle:20},{alive:256,iddle:20},{alive:254,iddle:19},{alive:253,iddle:19},{alive:253,iddle:19},{alive:252,iddle:19},{alive:251,iddle:19},{alive:250,iddle:19},{alive:250,iddle:19},{alive:250,iddle:19},{alive:250,iddle:19},{alive:251,iddle:19},{alive:253,iddle:19},{alive:258,iddle:19},{alive:263,iddle:19},{alive:271,iddle:19},{alive:281,iddle:19},{alive:290,iddle:19},{alive:299,iddle:19},{alive:309,iddle:19},{alive:315,iddle:19},{alive:323,iddle:19},{alive:330,iddle:19},{alive:333,iddle:19},{alive:336,iddle:19},{alive:339,iddle:19},{alive:340,iddle:19},{alive:343,iddle:19},{alive:344,iddle:19},{alive:346,iddle:19},{alive:348,iddle:19},{alive:350,iddle:18},{alive:350,iddle:18},{alive:350,iddle:18},{alive:350,iddle:18},{alive:348,iddle:18},{alive:346,iddle:18},{alive:342,iddle:18},{alive:338,iddle:18},{alive:333,iddle:18},{alive:327,iddle:18},{alive:317,iddle:17},{alive:313,iddle:17},{alive:304,iddle:17},{alive:296,iddle:17},{alive:289,iddle:17},{alive:281,iddle:16},{alive:277,iddle:16},{alive:271,iddle:16},{alive:266,iddle:16},{alive:263,iddle:16},{alive:259,iddle:16},{alive:254,iddle:16},{alive:250,iddle:16},{alive:244,iddle:16},{alive:241,iddle:16},{alive:237,iddle:16},{alive:231,iddle:16},{alive:227,iddle:16},{alive:223,iddle:16},{alive:219,iddle:16},{alive:215,iddle:15},{alive:213,iddle:15},{alive:211,iddle:15},{alive:210,iddle:15},{alive:209,iddle:15},{alive:209,iddle:15},{alive:209,iddle:15},{alive:208,iddle:15},{alive:208,iddle:15},{alive:207,iddle:15},{alive:205,iddle:15},{alive:204,iddle:15},{alive:202,iddle:15},{alive:201,iddle:15},{alive:200,iddle:15},{alive:197,iddle:15},{alive:195,iddle:14},{alive:193,iddle:14},{alive:190,iddle:14},{alive:189,iddle:14},{alive:187,iddle:14},{alive:187,iddle:14},{alive:187,iddle:14},{alive:187,iddle:14},{alive:187,iddle:14},{alive:187,iddle:14},{alive:187,iddle:13},{alive:187,iddle:13},{alive:187,iddle:13},{alive:187,iddle:13},{alive:187,iddle:13},{alive:188,iddle:13},{alive:189,iddle:13},{alive:191,iddle:13},{alive:193,iddle:13},{alive:194,iddle:13},{alive:196,iddle:13},{alive:198,iddle:13},{alive:199,iddle:13},{alive:201,iddle:13},{alive:202,iddle:13},{alive:205,iddle:13},{alive:209,iddle:13},{alive:214,iddle:13},{alive:218,iddle:13},{alive:223,iddle:13},{alive:224,iddle:13},{alive:226,iddle:13},{alive:227,iddle:13},{alive:227,iddle:13},{alive:227,iddle:13},{alive:227,iddle:13},{alive:225,iddle:13},{alive:222,iddle:13},{alive:219,iddle:13},{alive:217,iddle:13},{alive:213,iddle:13},{alive:210,iddle:13},{alive:205,iddle:13},{alive:199,iddle:13},{alive:192,iddle:13},{alive:188,iddle:13},{alive:182,iddle:13},{alive:179,iddle:13},{alive:177,iddle:13},{alive:176,iddle:13},{alive:175,iddle:13},{alive:174,iddle:13},{alive:173,iddle:13},{alive:172,iddle:13},{alive:171,iddle:13},{alive:169,iddle:13},{alive:169,iddle:13},{alive:169,iddle:13},{alive:169,iddle:13},{alive:169,iddle:13},{alive:169,iddle:13},{alive:171,iddle:13},{alive:173,iddle:14},{alive:176,iddle:14}]}function ui_render_dataTable(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,l=n,r=i,o=t,d=!1,s=m(t);$(e).html(p(t.id,t.colMapArray));var c=$("#".concat(t.id)).DataTable(s);return a.length>0&&_(a),u(l,r),{loadData:_,reloadNeeded:function(){return!!d||(d=!0,!1)},reloadData:function(t,a){c.off("select"),c.clear().destroy(!0),o.colMapArray=t,s=m(o),$(e).html(p(o.id,o.colMapArray)),c=$("#".concat(o.id)).DataTable(s),_(a),u(l,r)}};function _(e){c.rows.add(e).draw(),c.columns(0).order("desc").draw()}function u(e,t){c.on("select",function(t,a,n,i){if("row"===n){var l=c.rows(i).data().toArray();e(l[0])}}),c.on("deselect",function(e,a,n,i){if("row"===n){var l=c.rows(i).data().toArray();t(l[0])}})}function m(e){return{data:[],select:!0,deferRender:!0,scrollY:e.Height_in?e.Height_in:490,scrollX:!0,scrollCollapse:!0,scroller:!1,searching:!0,paging:!0,pageLength:100,language:{decimal:",",emptyTable:"Pas de données disponible dans le tableau",info:"Page _START_ à _END_ sur _TOTAL_ ligne(s)",infoEmpty:"Aucune ligne à afficher",infoFiltered:"(filtrage actif: _TOTAL_ ligne(s) trouvée(s) sur _MAX_ )",infoPostFix:"",thousands:" ",lengthMenu:"Afficher _MENU_ lignes",loadingRecords:"Chargement des données en cours...",processing:"Traitement en cours...",search:"Rechercher :",zeroRecords:"Aucune ligne trouvée",paginate:{first:"Début",last:"Fin",next:"Suivant",previous:"Précédent"},aria:{sortAscending:": activer le tri ascendant",sortDescending:": activer le tri descendant"}},columns:e.colMapArray,fixedHeader:{header:!0,footer:!0}}}function p(e,t){var a='\n                <table class="table table-bordered display compact" id="'.concat(e,'" width="100%" cellspacing="0" \n                        style=" white-space: nowrap ;background-color: #ccc;color:#444; width:100%;font-size: 8pt; \n                        font-family:Verdana">\n                    <thead> \n                    \t<tr>\n                    \t\t{{#field_list}}\n                    \t\t\t<th> {{short_name}} </th>\n                    \t\t{{/field_list}}\n\n                    \t</tr>\n                    </thead>\n                    <tfoot> \n                    \t<tr>\n                    \t\t{{#field_list}}\n                    \t\t\t<th> {{short_name}} </th>\n                    \t\t{{/field_list}}\n\n                    \t</tr>\n                    </tfoot>\n\n                </table>\n        \t');return Mustache.render(a,{field_list:t})}}function ui_render_navtabs(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i='\n\t\t\t<div class="tab-content orient-'.concat(t.nav_position,'" id="').concat(t.id,'-tabContent">\n\t\t\t\t{{#tabs}}\n\t\t\t\t\t<div class="tab-pane fade show {{active}}" id="{{id}}" role="tabpanel" aria-labelledby="{{id}}-tab">\n\t\t\t\t\t\t{{{html_content}}}\n\t\t\t\t\t</div>\t\t\t\t\n\t\t\t\t{{/tabs}}\n\t\t\t</div>\n\t'),l='\n\t\t\t<nav>\n\t\t\t  <div class="nav nav-tabs orient-'.concat(t.nav_position,'" id="_nav-tab" role="tablist">\n\t\t\t\t{{#tabs}}\n\t\t\t\t\t<a class="nav-item nav-link {{active}} {{disable}}" id="{{id}}-tab" data-toggle="tab" data-tabname="{{name}}" data-tablabel="{{label}}"  href="#{{id}}" role="tab" \n\t\t\t\t\taria-controls="{{id}}" aria-selected="{{selected}}"> {{{label}}} </a>\t\t\t\n\t\t\t\t{{/tabs}}\n\t\t\t  </div>\n\t\t\t</nav>\n\t'),r="top"==t.nav_position?l+i:i+l;r='   <div id="#'.concat(t.id,'"  class="card"> \t ').concat(r,"   </div>\t");var o=t;o.tabs=o.tabs.filter(function(e){return e.visible}),o.tabs=t.tabs.map(function(e){return e.active=e.id==o.default?"active":"",e.selected=e.id==o.default?"true":"false",e.disable=0==e.enabled?"disabled":"",e});var d=Mustache.render(r,o);return setTimeout(function(){d3.select("".concat(e)).html(d),$("".concat(e," .nav-item.nav-link")).on({click:function(e){$(this);var t=e.currentTarget.dataset,n={tabname:t.tabname,label:t.tablabel};a(n)}})},n),{api_func:function(e){},show_tab:function(e){$("#".concat(e,"-tab")).tab("show")}}}function ui_render_dropdown_inputgroup(e,t,a){var n='\n\t\t\t <div class="input-group-prepend">\n\t\t\t    <button class="btn btn-outline-secondary dropdown-toggle" type="button" data-toggle="dropdown"\n\t\t\t      aria-haspopup="true" aria-expanded="false"> '.concat(t.prompt,' :</button>\n\t\t\t    <div class="dropdown-menu">\n\t\t\t\t    {{#option_list}}\n\t\t\t\t\t\t<a class="dropdown-item"  data-key="{{key}}" data-label="{{label}}"\n\t\t\t\t\t\tstyle="line-height:1.2em; padding: 1px 4px; font-size:0.8rem;" href="#"> {{ label }} </a>\n\t\t\t\t\t{{/option_list}}\n\t\t\t    </div>\n\t\t\t</div>\n\t\t  <input type="text" class="form-control" aria-label="Text input with dropdown button" value="">\n\t\t '),i=t,l=t.tranform;is_function(t.tranform)&&(i.option_list=i.option_list.map(l));var r=Mustache.render(n,i);return d3.select("".concat(e)).html(r),$("".concat(e," .dropdown-item")).on({click:function(t){$(this);var n=t.currentTarget.dataset,i={key:n.key,label:n.label};$("".concat(e," > input.form-control")).val(i.label),a(i)}}),{update_view:function(t){var a=$("".concat(e,'  a[data-key="').concat(t,'"]'))[0].dataset;$("".concat(e," > input.form-control")).val(a.label)}}}function generate_legend(e,t){var a=d3.format("d"),n=d3.scale.threshold(),i=d3.select(e).append("svg");i.attr("width","100%").attr("height","50");var l=d3.svg.axis(),r=i.append("g").attr("class","cell-rect"),o=i.append("g").attr("class","axis"),d=i.append("g").attr("class","custom_label");d.attr("transform","translate( ".concat(15+t.offset.x," , ").concat(t.offset.y,")")),r.attr("transform","translate( ".concat(15+t.offset.x," , ").concat(t.offset.y,")")),o.attr("transform","translate( ".concat(15+t.offset.x," , ").concat(t.offset.y,")"));var s=d.append("text").attr("class","title-label");return c(),{set_prop:function(e,a){t[e]=a},refresh:function(){c()}};function c(){t.count=t.domain.length,t.cell.width=Math.round(t.width/(t.count+1)),opera_console.addLog("LegendController width : "+t.width+", with "+t.count+" legend classes :: "+JSON.stringify(t.domain)),n.domain(t.domain).range(d3.range(0,t.width+5,t.cell.width)),l.scale(n).orient("bottom").tickSize(t.tickSize).tickFormat(function(e){return a(e)}),t.colorscale.start&&t.colorscale.end?t._color_list=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#ffffff",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#000000",n=d3.scale.linear().domain([0,e]).interpolate(d3.interpolateRgb).range([d3.rgb(t),d3.rgb(a)]);return new Array(e+1).fill("0").map(function(e,t){return n(t)})}(t.count,t.colorscale.start,t.colorscale.end):t._color_list=t.colorscale,s.style("fill","#222").style("font-weight",700).style("font-size","1em").style("text-anchor","start").attr("x",0).attr("y",-12).text(t.title),function(e,a,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"none";function l(e){e.attr("x",function(e,t){return t*a}).attr("height",t.cell.height).attr("width",a).attr("fill",function(e,t){return n[t]}).attr("stroke",i).attr("stroke-width","1px")}rects=e.selectAll("rect").data(d3.range(0,n.length)),l(rects),l(rects.enter().append("rect")),rects.exit().remove()}(r,t.cell.width,t._color_list,"#000"),function(e){if(null==t.custom_label)return;function a(e){e.attr("class","custom-label").style("fill","#555").style("font-size","1.0em").style("text-anchor","middle").attr("x",function(e,a){return(a+.5)*t.cell.width}).attr("y",-3).attr("transform","rotate(0)").text(function(e){return e})}labels=e.selectAll("text.custom-label").data(t.custom_label),a(labels),a(labels.enter().append("text")),labels.exit().remove()}(d),o.call(l)}}function create_Chart(e,t,a){d3.time.format("%d-%m-%Y");var n=e.map(function(e){return e[a.label_field]});a.label_min=n[0],a.label_max=n[n.length-1];var i={data:{labels:e.map(function(e){return e[a.label_field]}),datasets:a.charts.map(function(t){return{label:t.label,type:t.type,yAxisID:t.yAxisID,backgroundColor:get_color(t.backgroundColor,.45),borderColor:get_color(t.borderColor,.99),borderWidth:"bar"==t.type?1:t.borderWidth?t.borderWidth:1,fill:"line"!=t.type,data:e.map(function(e){return e[t.field]})}})},options:{maintainAspectRatio:!1,title:{display:!0,text:a.title},tooltips:{intersect:!0,titleFontColor:"#333",backgroundColor:get_color("WHITE",.8),bodyFontColor:"#555",borderWidth:1,cornerRadius:2,borderColor:get_color("RED",.99)},scales:{xAxes:generate_xAxes_section(a),yAxes:generate_yAxes_section(a)}}},l=document.getElementById(t);return new Chart(l,i)}function generate_yAxes_section(e){var t=[];return["y-axis-1","y-axis-2"].forEach(function(a){var n;e[a]&&(t.push((n=e[a],{id:a,display:n.display,position:n.position,gridLines:{borderDash:[3,3],color:get_color("GRAY",.7)},ticks:{beginAtZero:!1},scaleLabel:{display:!0,labelString:n.labelString?n.labelString:"Title axe y1"}})),!1)}),0==t.length&&t.push({id:"y-axis-1",display:"true",position:"left",gridLines:{borderDash:[3,3],color:get_color("GRAY",.7)},ticks:{beginAtZero:!1},scaleLabel:{display:!0,labelString:"Nombre de cas"}}),t}function generate_xAxes_section(e){var t=e["x-axis-style"];return[{RASS:{gridLines:{borderDash:[2,2],color:get_color("GRAY",.7)},type:"category",ticks:{min:e.label_min,max:e.label_max,source:"auto",autoSkip:!1,autoSkipPadding:0,maxRotation:90,minRotation:60,fontColor:"gray",fontSize:9,fontFamily:"Univers Condensed,arial",callback:function(e,t,a){return truncateString(e,15)}}},COVID:{gridLines:{borderDash:[2,2],color:get_color("GRAY",.7)},type:"time",display:!0,time:{format:"DD/MM/YYYY",displayFormats:{day:"DD MMM"}},ticks:{source:"auto",autoSkip:!0,autoSkipPadding:25,maxRotation:0}}}[t]]}function truncateString(e,t){return e.length<=t?e:e.slice(0,t)+"..."}function get_color(e,t){return color_helper(chartColors[e]).alpha(t).rgbString()}function INIT_NAMED_COLOR_LIST(){var e;window.chartColors=(_defineProperty(e={INDIANRED:"RGB(205, 92, 92)",LIGHTCORAL:"RGB(240, 128, 128)",SALMON:"RGB(250, 128, 114)",DARKSALMON:"RGB(233, 150, 122)",LIGHTSALMON:"RGB(255, 160, 122)",CRIMSON:"RGB(220, 20, 60)",RED:"RGB(255, 0, 0)",FIREBRICK:"RGB(178, 34, 34)",DARKRED:"RGB(139, 0, 0)",PINK:"RGB(255, 192, 203)",LIGHTPINK:"RGB(255, 182, 193)",HOTPINK:"RGB(255, 105, 180)",DEEPPINK:"RGB(255, 20, 147)",MEDIUMVIOLETRED:"RGB(199, 21, 133)",PALEVIOLETRED:"RGB(219, 112, 147)"},"LIGHTSALMON","RGB(255, 160, 122)"),_defineProperty(e,"CORAL","RGB(255, 127, 80)"),_defineProperty(e,"TOMATO","RGB(255, 99, 71)"),_defineProperty(e,"ORANGERED","RGB(255, 69, 0)"),_defineProperty(e,"DARKORANGE","RGB(255, 140, 0)"),_defineProperty(e,"ORANGE","RGB(255, 165, 0)"),_defineProperty(e,"GOLD","RGB(255, 215, 0)"),_defineProperty(e,"YELLOW","RGB(255, 255, 0)"),_defineProperty(e,"LIGHTYELLOW","RGB(255, 255, 224)"),_defineProperty(e,"LEMONCHIFFON","RGB(255, 250, 205)"),_defineProperty(e,"LIGHTGOLDENRODYELLOW","RGB(250, 250, 210)"),_defineProperty(e,"PAPAYAWHIP","RGB(255, 239, 213)"),_defineProperty(e,"MOCCASIN","RGB(255, 228, 181)"),_defineProperty(e,"PEACHPUFF","RGB(255, 218, 185)"),_defineProperty(e,"PALEGOLDENROD","RGB(238, 232, 170)"),_defineProperty(e,"KHAKI","RGB(240, 230, 140)"),_defineProperty(e,"DARKKHAKI","RGB(189, 183, 107)"),_defineProperty(e,"LAVENDER","RGB(230, 230, 250)"),_defineProperty(e,"THISTLE","RGB(216, 191, 216)"),_defineProperty(e,"PLUM","RGB(221, 160, 221)"),_defineProperty(e,"VIOLET","RGB(238, 130, 238)"),_defineProperty(e,"ORCHID","RGB(218, 112, 214)"),_defineProperty(e,"FUCHSIA","RGB(255, 0, 255)"),_defineProperty(e,"MAGENTA","RGB(255, 0, 255)"),_defineProperty(e,"MEDIUMORCHID","RGB(186, 85, 211)"),_defineProperty(e,"MEDIUMPURPLE","RGB(147, 112, 219)"),_defineProperty(e,"REBECCAPURPLE","RGB(102, 51, 153)"),_defineProperty(e,"BLUEVIOLET","RGB(138, 43, 226)"),_defineProperty(e,"DARKVIOLET","RGB(148, 0, 211)"),_defineProperty(e,"DARKORCHID","RGB(153, 50, 204)"),_defineProperty(e,"DARKMAGENTA","RGB(139, 0, 139)"),_defineProperty(e,"PURPLE","RGB(128, 0, 128)"),_defineProperty(e,"INDIGO","RGB(75, 0, 130)"),_defineProperty(e,"SLATEBLUE","RGB(106, 90, 205)"),_defineProperty(e,"DARKSLATEBLUE","RGB(72, 61, 139)"),_defineProperty(e,"MEDIUMSLATEBLUE","RGB(123, 104, 238)"),_defineProperty(e,"GREENYELLOW","RGB(173, 255, 47)"),_defineProperty(e,"CHARTREUSE","RGB(127, 255, 0)"),_defineProperty(e,"LAWNGREEN","RGB(124, 252, 0)"),_defineProperty(e,"LIME","RGB(0, 255, 0)"),_defineProperty(e,"LIMEGREEN","RGB(50, 205, 50)"),_defineProperty(e,"PALEGREEN","RGB(152, 251, 152)"),_defineProperty(e,"LIGHTGREEN","RGB(144, 238, 144)"),_defineProperty(e,"MEDIUMSPRINGGREEN","RGB(0, 250, 154)"),_defineProperty(e,"SPRINGGREEN","RGB(0, 255, 127)"),_defineProperty(e,"MEDIUMSEAGREEN","RGB(60, 179, 113)"),_defineProperty(e,"SEAGREEN","RGB(46, 139, 87)"),_defineProperty(e,"FORESTGREEN","RGB(34, 139, 34)"),_defineProperty(e,"GREEN","RGB(0, 128, 0)"),_defineProperty(e,"DARKGREEN","RGB(0, 100, 0)"),_defineProperty(e,"YELLOWGREEN","RGB(154, 205, 50)"),_defineProperty(e,"OLIVEDRAB","RGB(107, 142, 35)"),_defineProperty(e,"OLIVE","RGB(128, 128, 0)"),_defineProperty(e,"DARKOLIVEGREEN","RGB(85, 107, 47)"),_defineProperty(e,"MEDIUMAQUAMARINE","RGB(102, 205, 170)"),_defineProperty(e,"DARKSEAGREEN","RGB(143, 188, 139)"),_defineProperty(e,"LIGHTSEAGREEN","RGB(32, 178, 170)"),_defineProperty(e,"DARKCYAN","RGB(0, 139, 139)"),_defineProperty(e,"TEAL","RGB(0, 128, 128)"),_defineProperty(e,"AQUA","RGB(0, 255, 255)"),_defineProperty(e,"CYAN","RGB(0, 255, 255)"),_defineProperty(e,"LIGHTCYAN","RGB(224, 255, 255)"),_defineProperty(e,"PALETURQUOISE","RGB(175, 238, 238)"),_defineProperty(e,"AQUAMARINE","RGB(127, 255, 212)"),_defineProperty(e,"TURQUOISE","RGB(64, 224, 208)"),_defineProperty(e,"MEDIUMTURQUOISE","RGB(72, 209, 204)"),_defineProperty(e,"DARKTURQUOISE","RGB(0, 206, 209)"),_defineProperty(e,"CADETBLUE","RGB(95, 158, 160)"),_defineProperty(e,"STEELBLUE","RGB(70, 130, 180)"),_defineProperty(e,"LIGHTSTEELBLUE","RGB(176, 196, 222)"),_defineProperty(e,"POWDERBLUE","RGB(176, 224, 230)"),_defineProperty(e,"LIGHTBLUE","RGB(173, 216, 230)"),_defineProperty(e,"SKYBLUE","RGB(135, 206, 235)"),_defineProperty(e,"LIGHTSKYBLUE","RGB(135, 206, 250)"),_defineProperty(e,"DEEPSKYBLUE","RGB(0, 191, 255)"),_defineProperty(e,"DODGERBLUE","RGB(30, 144, 255)"),_defineProperty(e,"CORNFLOWERBLUE","RGB(100, 149, 237)"),_defineProperty(e,"MEDIUMSLATEBLUE","RGB(123, 104, 238)"),_defineProperty(e,"ROYALBLUE","RGB(65, 105, 225)"),_defineProperty(e,"BLUE","RGB(0, 0, 255)"),_defineProperty(e,"MEDIUMBLUE","RGB(0, 0, 205)"),_defineProperty(e,"DARKBLUE","RGB(0, 0, 139)"),_defineProperty(e,"NAVY","RGB(0, 0, 128)"),_defineProperty(e,"MIDNIGHTBLUE","RGB(25, 25, 112)"),_defineProperty(e,"CORNSILK","RGB(255, 248, 220)"),_defineProperty(e,"BLANCHEDALMOND","RGB(255, 235, 205)"),_defineProperty(e,"BISQUE","RGB(255, 228, 196)"),_defineProperty(e,"NAVAJOWHITE","RGB(255, 222, 173)"),_defineProperty(e,"WHEAT","RGB(245, 222, 179)"),_defineProperty(e,"BURLYWOOD","RGB(222, 184, 135)"),_defineProperty(e,"TAN","RGB(210, 180, 140)"),_defineProperty(e,"ROSYBROWN","RGB(188, 143, 143)"),_defineProperty(e,"SANDYBROWN","RGB(244, 164, 96)"),_defineProperty(e,"GOLDENROD","RGB(218, 165, 32)"),_defineProperty(e,"DARKGOLDENROD","RGB(184, 134, 11)"),_defineProperty(e,"PERU","RGB(205, 133, 63)"),_defineProperty(e,"CHOCOLATE","RGB(210, 105, 30)"),_defineProperty(e,"SADDLEBROWN","RGB(139, 69, 19)"),_defineProperty(e,"SIENNA","RGB(160, 82, 45)"),_defineProperty(e,"BROWN","RGB(165, 42, 42)"),_defineProperty(e,"MAROON","RGB(128, 0, 0)"),_defineProperty(e,"WHITE","RGB(255, 255, 255)"),_defineProperty(e,"SNOW","RGB(255, 250, 250)"),_defineProperty(e,"HONEYDEW","RGB(240, 255, 240)"),_defineProperty(e,"MINTCREAM","RGB(245, 255, 250)"),_defineProperty(e,"AZURE","RGB(240, 255, 255)"),_defineProperty(e,"ALICEBLUE","RGB(240, 248, 255)"),_defineProperty(e,"GHOSTWHITE","RGB(248, 248, 255)"),_defineProperty(e,"WHITESMOKE","RGB(245, 245, 245)"),_defineProperty(e,"SEASHELL","RGB(255, 245, 238)"),_defineProperty(e,"BEIGE","RGB(245, 245, 220)"),_defineProperty(e,"OLDLACE","RGB(253, 245, 230)"),_defineProperty(e,"FLORALWHITE","RGB(255, 250, 240)"),_defineProperty(e,"IVORY","RGB(255, 255, 240)"),_defineProperty(e,"ANTIQUEWHITE","RGB(250, 235, 215)"),_defineProperty(e,"LINEN","RGB(250, 240, 230)"),_defineProperty(e,"LAVENDERBLUSH","RGB(255, 240, 245)"),_defineProperty(e,"MISTYROSE","RGB(255, 228, 225)"),_defineProperty(e,"GAINSBORO","RGB(220, 220, 220)"),_defineProperty(e,"LIGHTGRAY","RGB(211, 211, 211)"),_defineProperty(e,"SILVER","RGB(192, 192, 192)"),_defineProperty(e,"DARKGRAY","RGB(169, 169, 169)"),_defineProperty(e,"GRAY","RGB(128, 128, 128)"),_defineProperty(e,"DIMGRAY","RGB(105, 105, 105)"),_defineProperty(e,"LIGHTSLATEGRAY","RGB(119, 136, 153)"),_defineProperty(e,"SLATEGRAY","RGB(112, 128, 144)"),_defineProperty(e,"DARKSLATEGRAY","RGB(47, 79, 79)"),_defineProperty(e,"BLACK","RGB(0, 0, 0)"),e)}function ui_render_ThematicSelectList_Component_ex(e,t){var a=e.filter(function(e){return e.valid}),n=Mustache.render('\n\t\t\t <div class="input-group-prepend">\n\t\t\t    <button class="btn btn-outline btn-dark dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Choisir une thématique :</button>\n\t\t\t    <div class="dropdown-menu">\n\t\t\t\t    {{#thematic_arr}}\n\t\t\t\t\t\t<a class="dropdown-item"  data-key="{{name}}" data-label="{{label}}"\n\t\t\t\t\t\tstyle="line-height:1.2em; padding: 1px 4px; font-size:0.8rem;" href="#"> {{ label }} </a>\n\t\t\t\t\t{{/thematic_arr}}\n\t\t\t    </div>\n\t\t\t</div>\n\t\t  <input type="text" class="form-control" aria-label="Text input with dropdown button" value="">\n\t\t ',{thematic_arr:a});return d3.select("".concat(t)).html(n),$("".concat(t,"  .dropdown-item")).on({click:function(e){$(this);var a=e.currentTarget.dataset,n={key:a.key,label:a.label};$("".concat(t," > input.form-control")).val(n.label),Activate_thematic_section(n.key,!1)}}),{update_view:function(e){var a=$("".concat(t,'  a[data-key="').concat(e,'"]'))[0].dataset;$("".concat(t," > input.form-control")).val(a.label)}}}function ui_render_keySelectList_component_ex(e,t){var a=e.data_fields,n=Mustache.render('\n\t\t\t <div class="input-group-prepend">\n\t\t\t    <button class="btn btn-outline-secondary dropdown-toggle" type="button" \n\t\t\t        data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> Variable à cartographier :</button>\n\t\t\t    <div class="dropdown-menu">\n\t\t\t\t    {{#field_arr}}\n\t\t\t\t\t\t<a class="dropdown-item"  data-key="{{fld_name}}" data-label="{{short_name}}"\n\t\t\t\t\t\tstyle="line-height:1.2em; padding: 1px 4px; font-size:0.8rem;" href="#"> {{ short_name }} </a>\n\t\t\t\t\t{{/field_arr}}\n\t\t\t    </div>\n\t\t\t</div>\n\t\t  <input type="text" class="form-control" aria-label="Text input with dropdown button" value="">\n\t\t ',{field_arr:a});return d3.select("".concat(t)).html(n),$("".concat(t," .dropdown-item")).on({click:function(e){$(this);var a=e.currentTarget.dataset,n={key:a.key,label:a.label};$("".concat(t," > input.form-control")).val(n.label),after_selectKey_Changed(n.key)}}),{update_view:function(e){var a=$("".concat(t,'  a[data-key="').concat(e,'"]'))[0].dataset;$("".concat(t," > input.form-control")).val(a.label)}}}function ui_render_spatialLayerSelectList_component(e,t){var a=e,n=Mustache.render('\n\t\t\t <div class="input-group-prepend">\n\t\t\t    <button class="btn btn-outline-secondary dropdown-toggle" type="button" data-toggle="dropdown"\n\t\t\t      aria-haspopup="true" aria-expanded="false"> Niveau géographique :</button>\n\t\t\t    <div class="dropdown-menu">\n\t\t\t\t    {{#layer_arr}}\n\t\t\t\t\t\t<a class="dropdown-item"  data-key="{{name}}" data-label="{{label}}"\n\t\t\t\t\t\tstyle="line-height:1.2em; padding: 1px 4px; font-size:0.8rem;" href="#"> {{ label }} </a>\n\t\t\t\t\t{{/layer_arr}}\n\t\t\t    </div>\n\t\t\t</div>\n\t\t  <input type="text" class="form-control" aria-label="Text input with dropdown button" value="">\n\t\t ',{layer_arr:a});return d3.select("".concat(t)).html(n),$("".concat(t," .dropdown-item")).on({click:function(e){$(this);var a=e.currentTarget.dataset,n={key:a.key,label:a.label};$("".concat(t," > input.form-control")).val(n.label),after_selectLayer_Changed(n.key)}}),{update_view:function(e){var a=$("".concat(t,'  a[data-key="').concat(e,'"]'))[0].dataset;$("".concat(t," > input.form-control")).val(a.label)}}}INIT_NAMED_COLOR_LIST(),function(e){var t,a,n,i,l,r,o=["January","February","March","April","May","June","July","August","September","October","November","December"],d=["#4dc9f6","#f67019","#f53794","#537bc4","#acc236","#166a8f","#00a950","#58595b","#8549ba"],s=(void 0).Samples||((void 0).Samples={}),c=(void 0).Color;s.utils={srand:function(e){this._seed=e},rand:function(e,t){var a=this._seed;return e=void 0===e?0:e,t=void 0===t?1:t,this._seed=(9301*a+49297)%233280,e+this._seed/233280*(t-e)},numbers:function(e){var t,a,n=e||{},i=n.min||0,l=n.max||1,r=n.from||[],o=n.count||8,d=n.decimals||8,s=n.continuity||1,c=Math.pow(10,d)||0,_=[];for(t=0;t<o;++t)a=(r[t]||0)+this.rand(i,l),this.rand()<=s?_.push(Math.round(c*a)/c):_.push(null);return _},labels:function(e){var t,a=e||{},n=a.min||0,i=a.max||100,l=(i-n)/(a.count||8),r=a.decimals||8,o=Math.pow(10,r)||0,d=a.prefix||"",s=[];for(t=n;t<i;t+=l)s.push(d+Math.round(o*t)/o);return s},months:function(e){var t,a,n=e||{},i=n.count||12,l=n.section,r=[];for(t=0;t<i;++t)a=o[Math.ceil(t)%12],r.push(a.substring(0,l));return r},color:function(e){return d[e%d.length]},transparentize:function(e,t){var a=void 0===t?.5:1-t;return c(e).alpha(a).rgbString()}},window.randomScalingFactor=function(){return Math.round(s.utils.rand(-100,100))},s.utils.srand(Date.now()),document.location.hostname.match(/^(www\.)?chartjs\.org$/)&&(t=window,a=document,n="script",i="ga",t.GoogleAnalyticsObject=i,t.ga=t.ga||function(){(t.ga.q=t.ga.q||[]).push(arguments)},t.ga.l=1*new Date,l=a.createElement(n),r=a.getElementsByTagName(n)[0],l.async=1,l.src="//www.google-analytics.com/analytics.js",r.parentNode.insertBefore(l,r),ga("create","UA-28909194-3","auto"),ga("send","pageview"))}(),init_helper_functions();var fake_table='<div id="opera-rass-table" style= "position: relative; height:80vh;"> \n  \t '.concat(upcoming_function({fa_icon:"fa-table",messageTitle:"Section des vues tabulaires",messageContent:"Cette section présentera sous forme de tableau interactif, <br> le jeu de données associé à la thématique active"}),"\n  </div>  "),fake_monography='<div id="opera-rass-monography" style= "position: relative; height:80vh;"> \n  \t '.concat(upcoming_function({fa_icon:"fa-bar-chart",messageTitle:"Monographies",messageContent:"Bientot disponible, cette section contiendra les monographies générées <br> à la volée sur les circonscriptions sanitaires sélectionnées"}),"\n  </div> "),fake_about_us='<div id="opera-about-us" style= "position: relative; height:80vh;"> \n   \t '.concat(upcoming_function({fa_icon:"fa-cogs",messageTitle:"A propos du cabinet Improve",messageContent:"Cette section décrira l'offre de service du cabinet Improve"}),"\n  \n  </div>  "),opera_console_tmpl='\n\t<div  style= "position: relative; height:80vh;"> \n\t\t'.concat(include_button_group({group_id:"console_button",button_list:[{id:"cmd_reset_console",caption:"Reset console",callBack:"func_reset_console"},{id:"cmd_reset_storage",caption:"Reset Local Storage",callBack:"func_reset_local_storage"},{id:"cmd_supervisor",caption:"".concat(fa_icon("play")," Démarrer superviseur"),callBack:"func_start_supervision",caption_alt:"".concat(fa_icon("stop")," Arrêter Superviseur")}]}),'\n  \t\t <div id="opera-sys-message" style= "padding: 10px; margin : 0px 20px ;position: relative; height:50vh; background-color:#151414;color:#ddd; font-size:0.8em; overflow: scroll;">  \n  \t\t  \t<p> Informations systèmes: </p> \n  \t\t</div>\n\n  </div>  '),user={uuid:"8888-8898-8521-9652-9689-3265",start_at:"25/05/2020",when:"26/05/2020",req:"notification",res:"fail",comments:"hehehe"},connList=Array(50).fill(0).map(function(e){return user}),submit_function=function(e,t){var a="#".concat(t," input");opera_console.addLog("Vous avez cliqué sur le bouton: ".concat(t," et envoyer le message ").concat($(a).val())),Ajaxian.read("./buyers",function(e){opera_console.addLog("Suppression <b> ".concat(JSON.stringify(e)," </b>"),"success")},function(e,t,a){opera_console.addLog("Erreur lors du chargement de la table","fail")})},func_reset_console=function(){opera_console.clearlog()},func_reset_local_storage=function(e,t){user_session_manager.reset_token()},func_start_supervision=function(e,t){var a=user_session_manager.supervisor("toggle");$("#".concat(t)).html(a?"".concat(fa_icon("stop")," Arrêter Superviseur"):"".concat(fa_icon("play")," Démarrer superviseur"))},fake_historic=get_random_data(),func_start_traffic_monitoring=function(e,t){user_session_manager.supervisor("traffic",{eventtype:"new-data",data:fake_historic,from:null,to:null})},navtabController_RASS=new ui_render_navtabs("#RASS-NAV-TAB-CONTAINER",{id:"nav-tab-01",default:"tab-e",nav_position:"top",tabs:[{id:"tab-a",name:"graphics",label:"Graphiques",html_content:get_chart_container("chart-canvas-rass",600,250,"96%","80vh"),enabled:!0,visible:!0},{id:"tab-b",name:"table",label:"Vue tabulaire",html_content:' <div id="dttable_container"  style="margin:10px; padding: 10px;">  </div>',enabled:!0,visible:!0},{id:"tab-c",name:"monography",label:"Monographies",html_content:get_Monography_template_TODO(),enabled:!0,visible:!0},{id:"tab-d",name:"about_us",label:"Qui-sommes nous?",html_content:get_ourReferences_template_TODO(),enabled:!0,visible:IS_ADMIN_SESSION},{id:"tab-e",name:"sys_console",label:"Administration",html_content:' <div id="ADMIN-TAB-WRAPPER" style="background-color: #ee8; \n\t\t\t\t                  position:relative; height: 70vh;"> </div>',enabled:!0,visible:IS_ADMIN_SESSION}]},function(e){switch(e.tabname){case"graphics":rass_active_panel="tab-a";break;case"table":rass_active_panel="tab-b"}},1),navAdminController=new ui_render_navtabs("#ADMIN-TAB-WRAPPER",{id:"admin-tabs",default:"admin-tab-02",nav_position:"top",tabs:[{id:"admin-tab-01",name:"connected_users",label:"Utilisateurs connectés",html_content:Mustache.render(include_supevision_table(),{users:[]}),enabled:!0,visible:!0},{id:"admin-tab-02",name:"attendance_chart",label:"Historique des connexions",html_content:"".concat(include_button("btn-traffic-monitoring","Démarrer","func_start_traffic_monitoring"),"\n\t\t\t\t\t\t\t\t").concat(get_chart_container("chart-canvas-traffic",600,250,"90%","25vh")),enabled:!0,visible:IS_ADMIN_SESSION},{id:"admin-tab-03",name:"sys_audit",label:"Audit",html_content:get_opera_console_template_TODO(),enabled:!0,visible:IS_ADMIN_SESSION}]},function(e){},1),navtabController_COVID_UP=new ui_render_navtabs("#COVID-NAV-TAB-UP",{id:"rstuw-1",default:"covid-tab-up-01",nav_position:"top",tabs:[{id:"covid-tab-up-01",name:"indicators",label:"indicateurs de suivi",html_content:"".concat(get_chart_container("covid-canvas-up-1",650,300,"95%","35vh")),enabled:!0,visible:!0},{id:"covid-tab-up-02",name:"indicators_daily",label:"Indicateurs journaliers",html_content:"".concat(get_chart_container("covid-canvas-up-2",650,300,"95%","35vh")),enabled:!0,visible:!0},{id:"covid-tab-up-03",name:"confirmed_cases_sum",label:"Cumul des cas confirmés",html_content:"".concat(get_chart_container("covid-canvas-up-3",650,300,"95%","35vh")),enabled:!0,visible:!0}]},function(e){},1),navtabController_COVID_BOTTOM=new ui_render_navtabs("#COVID-NAV-TAB-BOTTOM",{id:"rstuow-2",default:"covid-tab-bottom-01",nav_position:"bottom",tabs:[{id:"covid-tab-bottom-01",name:"indicators",label:"Taux d'incidence quotidien",html_content:"".concat(get_chart_container("covid-canvas-bottom-1",650,300,"95%","35vh")),enabled:!0,visible:!0},{id:"covid-tab-bottom-03",name:"confirmed_cases_sum",label:"Dépistages réalisés",html_content:"".concat(get_chart_container("covid-canvas-bottom-3",650,300,"95%","35vh")),enabled:!0,visible:!0}]},function(e){},1);function get_chart_container(e,t,a,n,i){return'\n\t\t<div class="chart-container" style="position: relative; width: '.concat(n," ; height: ").concat(i,'; ">\n\t\t\t<canvas id="').concat(e,'" width="').concat(t,'" height="').concat(a,'"> \t</canvas>\n\t\t</div>')}function get_Monography_template_TODO(){return fake_monography}function get_table_container_template_TODO(){return fake_table}function get_ourReferences_template_TODO(){return fake_about_us}function get_opera_console_template_TODO(){return opera_console_tmpl}function init_helper_functions(){include_button_input=function(e,t,a,n){return'\n\t\t\t<nav class="navbar navbar-light bg-light">\n\t\t\t  <form id="'.concat(e,'" class="form-inline" onSubmit="').concat(n,"(this , '").concat(e,'\')">\n\t\t\t    \t<input class="form-control mr-sm-2" type="search" placeholder="').concat(a,'" aria-label="Search">\n\t\t\t    \t<button class="btn btn-outline-success my-2 my-sm-0" type="submit">').concat(t,"</button>\n\t\t\t  </form>\n\t\t\t</nav>\n\t\t\t")},include_button=function(e,t,a){return'\n\t\t\t<nav class="navbar navbar-light bg-light">\n\t\t\t  <form id="'.concat(e,'" class="form-inline" onSubmit="').concat(a,"(this , '").concat(e,'\')">\n\t\t\t    \t<button class="btn btn-outline-success my-2 my-sm-0" type="submit">').concat(t,"</button>\n\t\t\t  </form>\n\t\t\t</nav>\n\t\t\t")},include_button_group=function(e){return Mustache.render('\n\t\t\t\t<div id="{{group_id}}" class="btn-toolbar" role="toolbar" aria-label="Toolbar with button groups"  \n\t\t\t\t    style="padding: 5px 20px;">\n\t\t\t\t \t<div class="btn-group btn-group-sm mr-2" role="group" aria-label="First group">\n\t\t\t\t \t{{#button_list}}\n\t\t\t\t\t    <button  id="{{id}}" type="button" class="btn btn-secondary"  onClick="{{callBack}}(this, \'{{id}}\')"> {{{caption}}} </button>\n\t\t\t\t\t {{/button_list}}\n\t\t\t\t \t</div>\n\t\t\t\t</div>\n\t\t\t',e)},upcoming_function=function(e){return Mustache.render('<center>\n\t\t       <span style="position:relative; top: 150px; font-size: 20px; color:#999">  \n\t\t          <i class="fa {{fa_icon}} fa-5x"  style= "color:#ccc" ></i>\n\t\t          <h3> {{messageTitle}}</h3>\n\t\t          <h4> {{{messageContent}}}</h4>\n\t\t      </span>         \n\t    \t</center> ',e)},include_supevision_table=function(){return'\n\t\t\t<div  style="padding: 10px 20px 0px 20px; position: relative; height:80vh; width:90%;background-color: #ddd"> \n\t\t\t\t\x3c!--div style="position: absolute; top:0px;height:10vh; width:90%;background-color: #eee;">\n\t\t\t\t</div--\x3e\n\n\t\t\t\t<div style="position:relative; height:35vh; width:90%;margin-top:2vh;overflow:scroll; ">\n\t\t\t\t\t<table class="table table-sm">\n\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t    <tr>\n\t\t\t\t\t\t      <th scope="col"> UUID  </th> \n\t\t\t\t\t\t      <th scope="col"> Démarré à </th> \n\t\t\t\t\t\t      <th scope="col"> Dernière notif   </th> \n\t\t\t\t\t\t      <th scope="col"> Requête </th>\n\t\t\t\t\t\t      <th scope="col"> Réponse </th>\n\t\t\t\t\t\t      <th scope="col"> observation </th>\n\t\t\t\t\t\t    </tr>\n\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t{{#users}}\n\t\t\t\t\t\t\t    <tr>\n\t\t\t\t\t\t\t      \t<th>  {{uuid}}   </th> \n\t\t\t\t\t\t\t      \t<td>  {{start_at}} </td>  \n\t\t\t\t\t\t\t      \t<td>  {{when}} </td>  \n\t\t\t\t\t\t\t      \t<td>  {{req}} </td>  \n\t\t\t\t\t\t\t      \t<td>  {{res}} </td>\n\t\t\t\t\t\t\t      \t<td>  {{comments}} </td>\n\t\t\t\t\t\t\t    </tr>\n\t\t\t\t\t\t\t{{/users}}   \n\t\t\t\t\t\t  </tbody>\n\t\t\t\t\t</table>\n\t\t\t\t</div>\n\t\t\t</div>'},get_table_container=function(){return'\n      \t<div id="table-view-container" style= "position: relative; height:80vh;"> \n            <div id="tableview-wrapper" class="enveloppe">\n                <table class="table table-bordered display compact" id="data_table_id" width="100%" cellspacing="0" \n                        style=" white-space: nowrap ;background-color: #ccc;color:#444; width:100%;font-size: 8pt; \n                        font-family:Verdana">\n                    <thead> </thead>\n                    <tfoot> </tfoot>\n                </table>\n                <br>\n            </div>\n\t\t </div>  '},fa_icon=function(e){return' <i class="fa fa-'.concat(e,'" aria-hidden="true"></i> ')}}function build_COVID_chart_component(e){e.map(function(e){return e});create_Chart(e,"covid-canvas-up-1",{title:"EVOLUTION CHRONOLOGIQUE DES INDICATEURS EPIDEMIOLODIQUES DU COVID-19",label_field:"date_raw","x-axis-style":"COVID","y-axis-1":{display:!0,position:"left",labelString:"Nombre de cas"},"y-axis-2":{display:!1,position:"right",labelString:"Nombre de cas"},charts:[{label:"Nombre de cas actifs",type:"line",field:"active_case",backgroundColor:"ORANGE",borderColor:"ORANGE",yAxisID:"y-axis-1"},{label:"Nombre de cas guéris",type:"bar",field:"sum_healed",backgroundColor:"GREEN",borderColor:"GREEN",yAxisID:"y-axis-1"},{label:"Nombre de décès",type:"bar",field:"sum_deceased",backgroundColor:"RED",borderColor:"RED",yAxisID:"y-axis-1"}]}),create_Chart(e,"covid-canvas-up-2",{title:"EVOLUTION CHRONOLOGIQUE DES INDICATEURS JOURNALIERS DU COVID-19",label_field:"date_raw","x-axis-style":"COVID","y-axis-1":{display:!0,position:"left",labelString:"Nombre de cas"},"y-axis-2":{display:!1,position:"right",labelString:"Nombre de cas"},charts:[{label:"Nombre de prélèvements",type:"bar",field:"nb_sample",backgroundColor:"GRAY",borderColor:"GRAY",yAxisID:"y-axis-1"},{label:"Nouveaux cas",type:"bar",field:"new_case",backgroundColor:"BLUE",borderColor:"BLUE",yAxisID:"y-axis-1"},{label:"Nouveaux guéris",type:"bar",field:"new_healed",backgroundColor:"GREEN",borderColor:"GREEN",yAxisID:"y-axis-1"},{label:"Nouveaux décès",type:"bar",field:"new_deceased",backgroundColor:"RED",borderColor:"RED",yAxisID:"y-axis-1"}]}),create_Chart(e,"covid-canvas-up-3",{title:"SUIVI DES CAS CONFIRMES",label_field:"date_raw","x-axis-style":"COVID",charts:[{label:"Nombre de cas confirmés",type:"bar",field:"sum_case",backgroundColor:"ORANGE",borderColor:"ORANGE",yAxisID:"y-axis-1"},{label:"Nombre de prélèvements",type:"bar",field:"sum_sample",backgroundColor:"GRAY",borderColor:"GRAY",yAxisID:"y-axis-1"}]}),create_Chart(e,"covid-canvas-bottom-1",{title:"SUIVI DE L'INCIDENCE JOURNALIERE",label_field:"date_raw","x-axis-style":"COVID","y-axis-1":{display:!0,position:"left",labelString:"Nombre de cas"},"y-axis-2":{display:!0,position:"right",labelString:"% de cas d'infection"},charts:[{label:"Taux d'incidence journalier",type:"line",field:"incidence",backgroundColor:"VIOLET",borderWidth:3,borderColor:"VIOLET",yAxisID:"y-axis-2"},{label:"Nouveaux cas",type:"bar",field:"new_case",backgroundColor:"ORANGE",borderColor:"ORANGE",yAxisID:"y-axis-1"},{label:"Nombre de prélèvements",type:"bar",field:"nb_sample",backgroundColor:"GRAY",borderColor:"GRAY",yAxisID:"y-axis-1"}]}),create_Chart(e,"covid-canvas-bottom-3",{title:"DÉPISTAGES REALISÉS",label_field:"date_raw","x-axis-style":"COVID",charts:[{label:"Nombre de cas confirmés",type:"bar",field:"sum_case",backgroundColor:"KAKI",borderColor:"KAKI"},{label:"Nombre de prélèvements",type:"bar",field:"sum_sample",backgroundColor:"GRAY",borderColor:"GRAY",yAxisID:"y-axis-1"}]})}function build_RASS_chart_component(e,t,a,n){var i=e,l=t,r=n,o={table:"empty",field:"empty",geolyr:"empty"},d=c(a),s=create_Chart_ex(d,"chart-canvas-rass",{title:"".concat(i.label," par ").concat(r.names.value),label_field:i.data_parser.name_field,"x-axis-style":"RASS","y-axis-1":{display:!0,position:"left",labelString:l.short_name},"y-axis-2":{display:!1,position:"right",labelString:"Nombre de cas"},charts:[{label:l.long_name,type:"bar",field:l.fld_name,backgroundColor:"ORANGE",borderColor:"ORANGE",yAxisID:"y-axis-1"}]});return{updateChart:function(){s.update()},explain:function(){return s},setParams:function(e,t,a,n){switch(i=e,l=t,r=n,eventname=function(){var e=null;o.geolyr!=r.name&&(e="layer-changed");o.table!=i.name&&(e="data-theme-changed");null==e&&(e="key-changed");return o.geolyr=r.name,o.table=i.name,o.field=l.name,e}(),eventname){case"key-changed":new_struct=c(d.raw),s.data.datasets[0].data=new_struct.data,s.data.datasets[0].label=l.long_name,s.data.labels=new_struct.labels,s.options.scales.xAxes[0].ticks.min=new_struct.min,s.options.scales.xAxes[0].ticks.max=new_struct.max,s.options.scales.yAxes[0].scaleLabel.labelString=l.short_name,s.options.title.text="".concat(i.label," par ").concat(r.names.value),d=new_struct;break;case"data-theme-changed":case"layer-changed":new_struct=c(a),s.data.datasets[0].data=new_struct.data,s.data.datasets[0].label=l.long_name,s.data.labels=new_struct.labels,s.options.scales.xAxes[0].ticks.min=new_struct.min,s.options.scales.xAxes[0].ticks.max=new_struct.max,s.options.scales.yAxes[0].scaleLabel.labelString=l.short_name,s.options.title.text="".concat(i.label," par ").concat(r.names.value),d=new_struct}}};function c(e){var t,a,n=i.data_parser;return o.table!=i.name?(o.table=i.name,(t=e.map(function(e){return e})).sort(_)):o.field!=l.fld_name&&(t=e,o.field=l.fld_name,t.sort(_)),o.geolyr=r.name,{labels:t.map(function(e){return e[n.name_field]}),data:a=t.map(function(e){return e[l.fld_name]}),min:a[0],max:a[a.length-1],raw:t}}function _(e,t){return t[l.fld_name]-e[l.fld_name]}}function create_Chart_ex(e,t,a){d3.time.format("%d-%m-%Y");a.label_min=e.min,a.label_max=e.max;JSON.stringify(a);var n={data:{labels:e.labels,datasets:a.charts.map(function(t){return{label:t.label,type:t.type,yAxisID:t.yAxisID,backgroundColor:get_color(t.backgroundColor,.45),borderColor:get_color(t.borderColor,.99),borderWidth:"bar"==t.type?1:t.borderWidth?t.borderWidth:1,fill:"line"!=t.type,data:e.data}})},options:{maintainAspectRatio:!1,title:{display:!0,text:a.title},tooltips:{intersect:!0,titleFontColor:"#333",backgroundColor:get_color("WHITE",.8),bodyFontColor:"#555",borderWidth:1,cornerRadius:2,borderColor:get_color("RED",.99)},scales:{xAxes:generate_xAxes_section(a),yAxes:generate_yAxes_section(a)}}},i=(JSON.stringify(n),document.getElementById(t));return new Chart(i,n)}function build_traffic_chart_component(e){var t,n,l=create_Chart_v2("chart-canvas-traffic",e,{title:"Atlas Santé Cote d'Ivoire - Historique d'affluence",label_field:"total","x-axis-style":"COVID","y-axis-1":{display:!0,position:"left",labelString:"Nb connectés"},"y-axis-2":{display:!1,position:"right",labelString:"n/a"},charts:[{label:"Total connectés",type:"line",field:"total",backgroundColor:"BLUE",borderColor:"BLUE",yAxisID:"y-axis-1"},{label:"actives",type:"line",field:"alive",backgroundColor:"GREEN",borderColor:"GREEN",yAxisID:"y-axis-1"},{label:"en veille",type:"line",field:"iddle",backgroundColor:"RED",borderColor:"RED",yAxisID:"y-axis-1"}],data_format_function:function(e){var t=[];return t[0]=e.map(function(e){return e.total}),t[1]=e.map(function(e){return e.alive}),t[2]=e.map(function(e){return e.iddle}),a=e.map(function(e){return e.when}),{labels:a,min:a[0],max:a[a.length-1],data:t,raw:e}}});return n=l.chart,t=l.config,{updateChart:function(){n.update()},explain:function(){return n},setParams:function(e){switch(e.eventtype){case"window-changed":n.data.labels=new_struct.labels,n.options.scales.xAxes[0].ticks.min=e.from,n.options.scales.xAxes[0].ticks.max=e.to;break;case"new-data":for(new_struct=t.data_format_function(e.data),opera_console.addLog(" DATA FOR CHART_UPDATE : => "+JSON.stringify(new_struct),"warning"),n.data.labels=new_struct.labels,i=0;i<=2;i++)n.data.datasets[i].data=new_struct.data[i];n.options.scales.xAxes[0].ticks.min=new_struct.min,n.options.scales.xAxes[0].ticks.max=new_struct.max,n.options.title.text="Historique des connexions du ".concat(dateFormat(new_struct.min)," à ").concat(dateFormat(new_struct.max))}}}}function create_Chart_v2(e,t,a){d3.time.format("%d-%m-%Y");var n=a.data_format_function(t);opera_console.addLog(" DATA FOR CHART_CREATE : => "+JSON.stringify(n),"warning"),a.label_min=n.min,a.label_max=n.max;var i={data:{labels:n.labels,datasets:a.charts.map(function(e){return{label:e.label,type:e.type,yAxisID:e.yAxisID,backgroundColor:get_color(e.backgroundColor,.45),borderColor:get_color(e.borderColor,.99),borderWidth:"bar"==e.type?1:e.borderWidth?e.borderWidth:1,fill:"line"!=e.type,pointRadius:0,lineTension:0,data:n.data}})},options:{maintainAspectRatio:!1,title:{display:!0,text:a.title},tooltips:{intersect:!0,titleFontColor:"#333",backgroundColor:get_color("WHITE",.8),bodyFontColor:"#555",borderWidth:1,cornerRadius:2,borderColor:get_color("RED",.99)},scales:{xAxes:generate_xAxes_section(a),yAxes:generate_yAxes_section(a)}}},l=document.getElementById(e);return{chart:new Chart(l,i),config:a}}var navigate=function(e){var t=window.location.href;window.location.href=t.replace(/#(.*)$/,"")+"#"+e},test_capture_serie=[],winResizeTimerID=0,before_app_initialization=!0,geo_dataset_is_load=!1;window.onresize;var currentTable,currentMetaTable,currentKey,currentMetaField,currentGeodataset,currentMetaGeo,currentDetailTemplate,stats_table_set,dataKeyVal,mapData,tmplt_rowDescription,initialTable="tech_platform",initialKey="FLD1",dataById=d3.map(),DARKROUGE="#550000",VERT="#63d617",JAUNE="#ffff00",ORANGE="#ffae00",ROUGE="#ef2710",DARKGREEN="#005500",tmplt_details_virtual=" \n\t\t{{#data_fields}}  \n\t\t    <tr>\n\t\t \t    <th style='text-align: left; color: #000; font-weight: normal;'>\n\t\t \t        <i class='fa fa-info-circle fa-2x css-tooltip'  aria-hidden='true'> \n\t\t \t           <span class='css-tooltiptext'> {{ long_name }} </span>  \n\t\t \t        </i> {{ short_name }} \n\t\t \t        {{#show_unit}} \t<em>({{unit}})</em>: {{/show_unit}}\n\t\t\t\t</th>\n\t\t\t\t<td  style='text-align: right; color: #1b66a7;font-weight: bold;'> \n\t\t \t    \t{{ tag_open }} {{ fld_name }} {{ tag_close }}\n\t\t \t    </td> \n\t\t \t</tr> \t\n\t\t{{/data_fields}}\n\t";Mustache.parse(tmplt_details_virtual);var centered,zoom,chartController_admin,chartController_rass,legendControllervar,dataTableController,width=400,height=400,dyn_width=width,dyn_height=height,svg=d3.select("#map").append("svg").attr("preserveAspectRatio","xMidYMid").attr("viewBox","0 0 "+width+" "+height).attr("width","100%").attr("height","100%"),mapBackground=svg.append("g").append("rect").attr("class","rect-background").attr("width","200%").attr("height","200%").attr("transform","translate(-200 -200)"),mapFeatures=svg.append("g").attr("class","features YlGnBu"),mapFeaturesOverlay=svg.append("g").attr("class","selectedfeatures overlay"),projection=d3.geo.mercator().scale(1),tooltip=d3.select("#map").append("div").attr("class","tooltip hidden"),quantize=d3.scale.quantize().range(d3.range(9).map(function(e){return"q"+e+"-9"})),path=d3.geo.path().projection(projection),formatNumber=d3.format(".2f"),legendX=d3.scale.linear(),ZOOM_IS_DISABLE=!0,rass_active_panel="tab-b";function app_start_up(){opera_console.addLog(toJSON(user_agent));var e=d3.behavior.zoom().scaleExtent([1,15]).on("zoom",doZoom);svg.call(e),mapBackground.on("click",function(){MAP_overlay_draw([])}),opera_console.addLog("Démarrage d'Atlas Santé Côte d'Ivoire..","success"),legendController=new generate_legend("#legend",{title:"Legend Controller....",width:400,domain:[1,4,15,100,800],tickSize:15,offset:{x:15,y:23},cell:{height:12,width:45},colorscale:[DARKROUGE,ROUGE,ORANGE,JAUNE,VERT,DARKGREEN],custom_label:["Poor","labour","Middle class","High class","Rich","billionnaire"]}),theme_controller=ui_render_ThematicSelectList_Component_ex(metaDataBase.table_details,"#opera-theme-selector-1"),theme_controller.update_view(initialTable),Activate_thematic_section(initialTable),set_routes(),bind_Scale_Selector(),bind_layout_reset_to_windowResize()}function bind_layout_reset_to_windowResize(){window.onresize=function(){before_app_initialization||(winResizeTimerID&&clearTimeout(winResizeTimerID),winResizeTimerID=setTimeout(function(){opera_console.addLog("Windows resized detected"),updateLegend(null,!0),winResizeTimerID=0},450))}}function notify_application_readiness(){setTimeout(function(){0==isMobileDevice()&&0==force_mobile()?(before_app_initialization=!1,$("#curtain").addClass("hidden")):notify_initialization_abort(" Désolé, cette version d'Atlas Santé Côte d'Ivoire est destinée aux terminaux Desktop!")},5e3)}function Activate_thematic_section(e){load_dataframe(e,function(e){toogle_layout(e),layer_arr=extractLayerObjects(metaDataBase.geo_datasets,e.layerList,"name"),layer_controller=ui_render_spatialLayerSelectList_component(layer_arr,"#opera-spatiallayer-selector-2"),key_controller=ui_render_keySelectList_component_ex(e,"#opera-variablekey-selector-3"),currentKey="FLD1",currentMetaTable=e,update_color_palette(e.color_palette),update_dataTableView(e),tmplt_rowDescription=ui_updateTemplate_details({data_fields:e.data_fields,tag_open:function(){return"{{"},tag_close:function(){return"}}"}}),layer_controller.update_view(e.layerList[0]),after_selectLayer_Changed(e.layerList[0]),key_controller.update_view("FLD1"),notify_application_readiness()},function(e){alert(e)})}function toogle_layout(e){"COVID"==e.layout?(d3.select("#COVID-pane").classed("hidden",!1),d3.select("#RASS-pane").classed("hidden",!0)):(d3.select("#COVID-pane").classed("hidden",!0),d3.select("#RASS-pane").classed("hidden",!1))}function after_selectKey_Changed(e){currentKey=e,currentMetaField=currentMetaTable.data_fields.find(function(t){return t.fld_name===e}),updateMapColors(),updateGraphic(),"COVID"!=currentMetaTable.layout&&navtabController_RASS.show_tab(rass_active_panel)}function after_selectLayer_Changed(e){var t=get_spatialLayer(e);get_geoData(t.name,t.path,function(a,n){dataById=stats_table_set[e],dataKeyVal=stats_table_set[e+"_raw"],mapData=dataKeyVal,geo_dataset_is_load=!0,currentKey=currentKey||"FLD1",currentMetaGeo=t,update_dataTableView(currentMetaTable),preload_geoDataSet(n),after_selectKey_Changed(currentKey)})}function get_statsData(e,t,a){if(http_server_exe_mode=!0,http_server_exe_mode)d3.csv(t,function(e){a(e)});else{var n=find_statsdata_from_memory(e);a(n)}}function get_geoData(e,t,a){if(http_server_exe_mode)d3.json(t,function(e,t){a(e,t)});else{var n=find_geodata_from_memory(e);a(null,n)}}function after_thematic_section_Changed(e){Activate_thematic_section(e)}function after_colorPalette_selected(e){before_app_initialization||(currentMetaTable.color_palette=e,update_color_palette(e),navigate("home"))}function create_histogram_object(){histogram=new BarChart,histogram.initChart()}function get_missing_fields(e,t){var a=Object.keys(e);return t.reduce(function(e,t){return-1==a.indexOf(t)&&e.push(t),e},[])}function load_dataframe(e,t,a){var n=metaDataBase.table_details.find(function(t){return t.name===e});if(!n)return a("invalid dataframe "+e+" encoutered. Check metaDataBase"),null;!function(e,t,a){if(http_server_exe_mode=!0,http_server_exe_mode)d3.csv(t,function(e){a(e)});else{var n=find_statsdata_from_memory(e);a(n)}}(n.name,n.path,function(e){var a=n,i=a.data_parser,l=a.layerList[0];stats_table_set=generate_statistic_tables_ex(e,i),dataById=stats_table_set[l],dataKeyVal=stats_table_set[l+"_raw"];get_spatialLayer(n.layerList[0]);mapData=dataKeyVal,t(n)})}function geo_data_load_needed(e,t){return null==e||e.id!=t.id}function extractLayerObjects(e,t,a){return e.reduce(function(e,a){return-1!=t.indexOf(a.name)&&e.push(a),e},[])}function get_spatialLayer(e){return metaDataBase.geo_datasets.find(function(t){return t.name==e})}function preload_geoDataSet(e){projection=d3.geo.mercator().scale(1),path=d3.geo.path().projection(projection),currentGeodataset=e;var t=calculateScaleCenter(e);projection.scale(t.scale).center(t.center).translate([width/2,height/2]),mapFeatures.selectAll("path").remove(),mapFeatures.selectAll("path").data(e.features).enter().append("path").attr("class","ogis-nocolor").attr("d",path).on("mousemove",showTooltip).on("mouseout",hideTooltip).on("click",after_feature_clicked)}function after_feature_clicked(e){MAP_overlay_draw([e]),clicked(e)}function MAP_zoom_on_feature(e,t){opera_console.addLog(" The metaGeo objet is : ".concat(toJSON(currentMetaGeo),'  <br>\n     \tSearching Feature found on criteria =====>> " +\n        d.properties[ ').concat(currentMetaGeo.idfield," ] == ").concat(e,' "'));var a=currentGeodataset.features.find(function(t){return t.properties[currentMetaGeo.idfield]==e});a&&after_feature_clicked(a)}function MAP_overlay_draw(e){mapFeaturesOverlay.selectAll("path").remove(),mapFeaturesOverlay.selectAll("path").data(e).enter().append("path").attr("pointer-events","none").attr("d",function(e){return path(e)})}function updateMapColors(){var e,t,a,n,i=currentMetaTable;e=d3.min(mapData,function(e){return getValueOfData(e)}),t=d3.max(mapData,function(e){return getValueOfData(e)}),"auto"==(a=i.renderer).source?(n=get_renderer(a.count,[1+e,t],a.color_range),i.renderer_interpolated=n):n=a;var l=d3.scale.threshold().domain(n.threshold).range(n.colormap);mapFeatures.selectAll("path").style("fill",function(e){var t=dataById[getIdOfFeature(e)],a=t?getValueOfData(t):0;return l(a)}),updateLegend(n,!0)}function update_dataTableView(e){"COVID"!=e.layout&&(e.dt=e.dt||{},e.dt.colArray=e.dt.colArray||generate_colArray(e),(dataTableController=dataTableController||new ui_render_dataTable("#dttable_container",{id:"dttable_object",colMapArray:e.dt.colArray,height:"80vh"},mapData,function(e){MAP_zoom_on_feature(e.CODE,0)},function(e){MAP_zoom_on_feature(e.CODE,-1)})).reloadNeeded()&&dataTableController.reloadData(e.dt.colArray,mapData))}function clicked(e){var t,a;opera_console.addLog(" Objet paramètre d'exécution de la function dans clicked : "+JSON.stringify(e));var n=mapFeatures,i=mapFeaturesOverlay;if(e&&centered!==e){var l=path.centroid(e),r=l[0];t=l[1],a=4,centered=e,i.selectAll("path").attr("class","selected-feature-centered")}else r=width/2,t=height/2,a=1,centered=null,i.selectAll("path").attr("class","selected-feature");n.selectAll("path").classed("active",centered&&function(e){return e===centered}),n.transition().duration(750).attr("transform","translate("+width/2+","+height/2+")scale("+a+")translate("+-r+","+-t+")").style("stroke-width",.5/a+"px"),i.transition().duration(750).attr("transform","translate("+width/2+","+height/2+")scale("+a+")translate("+-r+","+-t+")").style("stroke-width",.25/a+"px")}function updateLegend(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=e||currentMetaTable.renderer_interpolated;opera_console.addLog("_renderer is equal to"+JSON.stringify(a)),opera_console.addLog("currentMetaTable.renderer is "+JSON.stringify(currentMetaTable.renderer)),opera_console.addLog("render for legend update is "+JSON.stringify(a));var n=currentMetaField;if(!before_app_initialization||t){var i=d3.select("#map").node().getBoundingClientRect().width-30,l=a.legendtitle?a.legendtitle:n.short_name;legendController.set_prop("title",l),legendController.set_prop("width",i),legendController.set_prop("domain",a.threshold),legendController.set_prop("colorscale",a.colormap),legendController.set_prop("custom_label",a.labelmap),legendController.refresh()}}function update_color_palette(e){}function calculateScaleCenter(e){var t=path.bounds(e),a=.95/Math.max((t[1][0]-t[0][0])/width,(t[1][1]-t[0][1])/height),n=d3.geo.bounds(e);return{scale:a,center:[(n[1][0]+n[0][0])/2,(n[1][1]+n[0][1])/2]}}function getValueOfData(e){return+e[currentKey]}function doZoom(){ZOOM_IS_DISABLE||mapFeatures.attr("transform","translate("+d3.event.translate+") scale("+d3.event.scale+")").style("stroke-width",.5/d3.event.scale+"px")}function getIdOfFeature(e){var t=currentMetaGeo.idfield;return e.properties[t]}function showTooltip(e){var t=getIdOfFeature(e),a=dataById[t],n=a[currentKey],i="\n\t\t<span>".concat(currentMetaGeo.names.value,'</span><br>\n\t\t<span style="font-size:11px; color: #111;">\n\t\t\t ').concat(a.ADM_NAME,' \n\t\t</span><hr style="height: 1px; margin: 1px">\n\t\t<span style="font-size:14px; color: red;">\n\t\t\t ').concat(UTIL.format_number(n)," \n\t\t</span>\n\t\t<span>").concat(currentMetaField.unit,"\n\t\t</span>"),l=a?i:"Région sanitaire Inconnue",r=d3.mouse(d3.select("#map").node()).map(function(e){return parseInt(e)}),o=r[0]+5,d=r[1]+15;tooltip.classed("hidden",!1).attr("style","left:"+o+"px; top:"+d+"px").html("<center>"+l+"</center>")}function capture_random(e,t){test_capture_serie.length>500||(test_capture_serie.push({alive:e,iddle:Math.round(.05*t)}),500==test_capture_serie.length&&opera_console.addLog("SERIE PSEUDO ALEATOIRE =>> "+JSON.stringify(test_capture_serie)))}function hideTooltip(){tooltip.classed("hidden",!0)}function showDetails(e){var t=getIdOfFeature(e),a=(dataById[t],ui_pre_render_format(a));ui_render_details(a)}function generate_statistic_tables_ex(e,t){var a=t.class_field,n=(t.id_field,t.classes[0].value),i=t.classes[1].value,l=t.classes[0].layer,r=t.classes[1].layer,o=d3.nest().key(function(e){return e[a]}).rollup(function(e){return e}).map(e);table_1=d3.nest().key(function(e){return e.CODE}).rollup(function(e){return e[0]}).map(o[n]),table_2=d3.nest().key(function(e){return e.CODE}).rollup(function(e){return e[0]}).map(o[i]);var d={};return d[l]=table_1,d[l+"_raw"]=o[n],d[r]=table_2,d[r+"_raw"]=o[i],d}function updateGraphic(){var e=currentMetaTable,t=currentMetaField,a=currentMetaGeo;"COVID"!=e.layout&&(chartController_rass?(chartController_rass.setParams(e,t,mapData,a),chartController_rass.updateChart({duration:1500,easing:"linear"})):chartController_rass=build_RASS_chart_component(e,t,mapData,a))}function handle_mapMouseover_actions(e){metadata.layout}function get_graphic_infos(){return{x:currentKey,y:"ADM_NAME",title:currentMetaTable.label,subtitle:currentMetaField.short_name,y_unit:"District",x_unit:currentMetaField.short_name,deco_infos_1:"Ce graphique dépeint la "+currentMetaField.long_name+" par district en 2017",deco_infos_2:currentMetaTable.article+currentMetaTable.unit,deco_infos_3:currentMetaTable.article+currentMetaTable.unit,deco_source:" Généré par Atlas Santé - Source de données "+currentMetaTable.source}}function ui_updateTemplate_details(e){var t=Mustache.render(tmplt_details_virtual,e);return Mustache.parse(t),t}function ui_render_details(e){var t=Mustache.render(tmplt_rowDescription,e),a={};a.ADM_NAME=e.ADM_NAME,a.HTML_TABLE_ROWS=t;var n=Mustache.render(tmplt_details_hard,a);sysecho("detailsHtml",n),d3.select("#details").html(n),d3.select("#initial").classed("hidden",!0),d3.select("#sysinfos").classed("hidden",!0),d3.select("#details").classed("hidden",!1),dyn_width=svg.style("width"),dyn_height=svg.style("height")}function ui_render_ThematicSelectList_Component(e){var t=Mustache.render(tmplt_table_select,e);d3.select("#table_selector-wrapper").html(t),d3.select("#select-table").on("change",function(e){after_thematic_section_Changed(d3.select(this).property("value"))})}function ui_render_colorPaletteSelect(e){var t=Mustache.render(tmplt_palette_select,e);d3.select("#palette_selector-wrapper").html(t)}function ui_render_keySelectList_component(e){var t=Mustache.render(tmplt_key_select,e);d3.select("#var_selector-wrapper").html(t),d3.select("#select-key").on("change",function(e){after_selectKey_Changed(d3.select(this).property("value"))})}function ui_render_sysinfos(){var e={table:currentMetaTable,field:currentMetaField},t=Mustache.render(tmplt_sysinfos,e);d3.select("#message-box").html(t)}function ui_pre_render_format(e){return UTIL.format_number_in_object(e)}function showSysInfos(){d3.select("#details").classed("hidden",!0),d3.select("#initial").classed("hidden",!0),d3.select("#sysinfos").classed("hidden",!1)}function hideSysInfos(){d3.select("#details").classed("hidden",!0),d3.select("#initial").classed("hidden",!1),d3.select("#sysinfos").classed("hidden",!0)}function hideDetails(){d3.select("#details").classed("hidden",!0),d3.select("#initial").classed("hidden",!1),d3.select("#sysinfos").classed("hidden",!0)}function showSettings(){d3.select("#bttn-setting").classed("hidden",!0),d3.select("#setting-wrapper").classed("hidden",!1),d3.select("#barchart-wrapper").classed("hidden",!0)}function hideSettings(){d3.select("#bttn-setting").classed("hidden",!1),d3.select("#setting-wrapper").classed("hidden",!0),d3.select("#barchart-wrapper").classed("hidden",!1)}function in_geojsonfile(e){return"YES"==e.GEOLOC}function set_routes(){Router({"/action/select-palette/:color_palette":after_colorPalette_selected,"/action/test-debug/:reload_chart":histogram_draw,"/action/:start-server":start_server,"/action/:stop-server":start_server,"/action/:connect-client":start_server,"/action/app-settings":function(){},"/home":function(){}}).init()}function start_server(e){$.ajax({url:"/socket/".concat(e),method:"GET",data:{time:1,user:5},success:function(e){d3.json(e,function(e){})},error:function(e){$("#socket-report").html(e.responseText)}})}function histogram_draw(){histogram.draw(),navigate("home")}function look_at(e,t){alert(e+":"+t)}function sysecho(e,t){}function bind_Scale_Selector(){$("#scale-selector .dropdown-item").on({click:function(e){$(this);var t=e.currentTarget.dataset,a={key:t.key,label:t.label};$("#current_admin_level").val(a.label)}})}winResizeTimerID=0;var COVIDATA,behave_as_mobile_device_on_start_up=!1,user_session_manager=(before_app_initialization=!0,new user_connexion_manager_constructor);function isMobileDevice(){return void 0!==window.orientation||-1!==navigator.userAgent.indexOf("IEMobile")}function user_connexion_manager_constructor(){var e,t,a,n,i=10,l=0,r=new _StorageManager,o=!1;detect_client();return{boot_app:function(){m(function(){Ajaxian.post("./visitors/boot_app",user_agent,d,u),l++})},start_session:d,stop_session:function(){},get_online_users:function(){Ajaxian.read("./visitors/admin",f,u)},reset_token:function(){opera_console.addLog("Token removed from Local storage","success"),r.removeItem("opera.kassaprekoh.2020")},supervisor:function(a,n){switch(a){case"toggle":0==o?(i=t.timers.adminClient,opera_console.addLog("Démarrage du superviseur :tempo ="+i,"request"),o=!0,e=setInterval(function(){opera_console.addLog("Notify session alive:"+t.uuid,"request"),Ajaxian.read("./visitors/admin_query",f,u)},i),o=!0):(opera_console.addLog("Arret du superviseur :","warning"),o=!1,clearInterval(e),o=!1);break;case"traffic":chartController_admin?(chartController_admin.setParams(n),chartController_admin.updateChart()):chartController_admin=new build_traffic_chart_component(n.data)}var i;return o}};function d(e){a=e,r.existItem("opera.kassaprekoh.2020",!1)?(n=r.getItem(),opera_console.addLog("Utilisateur ".concat(n,"  identifié par le Browser :"),""),opera_console.addLog("Demande de vérification :"+n,"request"),m(function(){Ajaxian.read("./visitors/read_visitor/".concat(n),_,u),l++})):(opera_console.addLog("Visiteur Inconnu :","fail"),opera_console.addLog("Demande d'une nouvelle clé par le client :","request"),m(function(){Ajaxian.post("./visitors/new_visitor",a,s,u),l++}))}function s(e){opera_console.addLog("Server Response with new Badge => "+JSON.stringify(e),"success"),r.setItem("opera.kassaprekoh.2020",e.uuid),(t=e).new_visitor=!0,m(function(){Ajaxian.post("./visitors/boot_success",t,c,u),l++})}function c(e){var a;e.appIsReady&&(app_start_up(),a=(t=e).timers.notifyClient,opera_console.addLog("Démarrage du notificateur de présence: tempo ="+a,"request"),setInterval(function(){opera_console.addLog("Notify session alive:"+t.uuid,"request"),Ajaxian.read("./visitors/notify_alive/".concat(t.uuid),p,u)},a))}function _(e){e.appIsReady?(opera_console.addLog("Serveur response on Visitor Check, : restoring du badge => "+JSON.stringify(e),"success"),(t=e).new_visitor=!1,t._uuid=a._uuid,m(function(){Ajaxian.post("./visitors/boot_success",t,c,u),l++})):(opera_console.addLog("Visitor with invalid KEY, Requesting a new KEY :"+JSON.stringify(a),"warning"),m(function(){Ajaxian.post("./visitors/new_visitor",a,s,u),l++}))}function u(e,t,a){opera_console.addLog("HTTP//ERROR 500 :"+e.responseText,"fail")}function m(e,t){if(l>i)return opera_console.addLog("Application stopped due to Infinite loop !!!","fail"),void notify_initialization_abort("To match cycles between browser and Server");e()}function p(e){opera_console.addLog("Server notification feedback:"+JSON.stringify(e),"success")}function f(e){opera_console.addLog(e)}}function force_mobile(){return 1==behave_as_mobile_device_on_start_up}user_session_manager.boot_app();var badge_template='<div class="card text-center {{color_class}}">\n\t    <div class="card-body" style="padding: 0.5em;">\n\t     <span style="display: block; font-weight: 500 ;font-size: 0.9em; \n\t     padding-bottom: 0.3em; line-height: 1;"> {{label}} </span>\n\t     <span style="display: block; font-weight: 750;  font-size: 1.5em; padding-bottom: 0.3em; line-height: 1;"> \n               {{value}}\n               <span style="font-weight: 350; font-weight: 500; font-size: 0.6em; padding-bottom: 0.3em;\n             \t\t\t\tline-height: 1;"> \n                 ( {{symbol}}{{delta}},  <span style="font-weight: 250;  font-size: 0.8em; ">au {{date}} </span> )  \n               </span>\n\t \t</span>\n\t  </div>\n\t</div>';function update_badges(){var e=extract_late_datarow();function t(e,t){t.symbol=function(){return this.delta<0?"":"+"},$(e).html(Mustache.render(badge_template,t))}t("#card-1",{color_class:"badge-orange",label:"Cas confirmés",value:e.sum_case,delta:e.new_case,date:e.date_raw}),t("#card-2",{color_class:"badge-yellow",label:"Cas actifs",value:e.active_case,delta:e.new_case,date:e.date_raw}),t("#card-3",{color_class:"badge-red",label:"Décès",value:e.sum_deceased,delta:e.new_deceased,date:e.date_raw}),t("#card-4",{color_class:"badge-green",label:"Guéris",value:e.sum_healed,delta:e.new_healed,date:e.date_raw})}function extract_late_datarow(){var e=COVIDATA.length;return COVIDATA[e-1]}function USER_INTERFACE_update_layout(){opera_console.addLog("Windows resized")}var color_helper=Chart.helpers.color;function notify_initialization_abort(e){$("#start-up-failure-msgbox").html(e),$("#spinner").html(""),$("#spinner-message").html("")}fileLoad_JSON("Données épidémiologique sur le COVID-19","./data/covid-data.json",function(e){COVIDATA=e,update_badges(),build_COVID_chart_component(e),before_app_initialization=!1},function(e){alert("erreur "+e)});
